<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>ä½¿ç”¨DAD(Dagsterã€Airbyteã€dbt) æ„å»ºç°ä»£æ•°æ®æ ˆ</title>
    <meta name="description" content="keep curious ğŸ˜¼">
    <meta name="keywords" content='blog, chinalhr, lhr, data-stack'>

    <meta property="og:url" content="https://chinalhr.github.io/post/modern-data-stack/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ä½¿ç”¨DAD(Dagsterã€Airbyteã€dbt) æ„å»ºç°ä»£æ•°æ®æ ˆ">
    <meta property="og:description" content="keep curious ğŸ˜¼">
    <meta property="og:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ä½¿ç”¨DAD(Dagsterã€Airbyteã€dbt) æ„å»ºç°ä»£æ•°æ®æ ˆ">
    <meta name="twitter:description" content="keep curious ğŸ˜¼">
    <meta property="twitter:domain" content="https://chinalhr.github.io/post/modern-data-stack/">
    <meta property="twitter:url" content="https://chinalhr.github.io/post/modern-data-stack/">
    <meta name="twitter:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    
    <link rel="canonical" href="https://chinalhr.github.io/post/modern-data-stack/" />

    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://chinalhr.github.io//css/dark.css">

    <script src="https://chinalhr.github.io//js/svg-injector.min.js"></script>
    <script src="https://chinalhr.github.io//js/feather-icons.min.js"></script>
    <script src="https://chinalhr.github.io//js/main.js"></script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JLJBQBW5WM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JLJBQBW5WM');
</script>
  
    
    
    
    
    <script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    

    
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://chinalhr.github.io/">
                <img src="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://chinalhr.github.io/">LHR</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/" aria-label="Jump to a specific link"><span data-feather='home'></span> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/post/" aria-label="Jump to a specific link"><span data-feather='book'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/tags/" aria-label="Jump to a specific link"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/projects/" aria-label="Jump to a specific link"><span data-feather='code'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/about/" aria-label="Jump to a specific link"><span data-feather='user'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/chinalhr" aria-label="Jump to a specific link"><span data-feather='github'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/index.xml" aria-label="Jump to a specific link"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/" aria-label="Jump to a specific link"><span data-feather='home'></span> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/post/" aria-label="Jump to a specific link"><span data-feather='book'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/tags/" aria-label="Jump to a specific link"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/projects/" aria-label="Jump to a specific link"><span data-feather='code'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/about/" aria-label="Jump to a specific link"><span data-feather='user'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/chinalhr" aria-label="Jump to a specific link"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/index.xml" aria-label="Jump to a specific link"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>ä½¿ç”¨DAD(Dagsterã€Airbyteã€dbt) æ„å»ºç°ä»£æ•°æ®æ ˆ</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            November 18, 2023
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://chinalhr.github.io/tags/data-stack">data-stack</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <blockquote>
<p>ç°ä»£æ•°æ®æ ˆä»‹ç»ä»¥åŠä½¿ç”¨DAD(dbt-Airbyte-Dagster)æ„å»ºç°ä»£æ•°æ®æ ˆå®è·µã€‚</p>
</blockquote>
<h2 id="ç°ä»£æ•°æ®æ ˆçš„å‘å±•">ç°ä»£æ•°æ®æ ˆçš„å‘å±•</h2>
<p>ç°ä»£æ•°æ®æ ˆ (Modern Data Stackï¼Œç®€ç§°MDS) æ˜¯ç”±ä¸€å †å¼€æºå·¥å…·æ„æˆï¼Œç”¨äºå®ç°æ•°æ®ä»æ‘„å…¥åˆ°è½¬æ¢åˆ°MLï¼Œå†åˆ°åç«¯æ•°æ®ä»“åº“æˆ–æ•°æ®æ¹–ï¼ŒBIä»ªè¡¨ç›˜çš„ç«¯åˆ°ç«¯åˆ†æã€‚è¯¥å †æ ˆå¯ä»¥åƒç§¯æœ¨èˆ¬è¿›è¡Œæ‰©å±•ã€‚MDS çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€é€‚åˆæ¯ä¸ªéƒ¨åˆ†ï¼ˆæ•°æ®é›†æˆã€è½¬æ¢ã€ç¼–æ’ã€BI&hellip;ï¼‰çš„å·¥å…·è·å¾—æ•°æ®æ´å¯Ÿã€‚</p>
<h3 id="è¿‡å»ç°åœ¨ä¸æœªæ¥">è¿‡å»ã€ç°åœ¨ä¸æœªæ¥</h3>
<p>dbtçš„åˆ›å§‹äººTrisan Handyæ›¾å¯¹ MDS å‘è¡¨è¿‡ä¸€äº›çœ‹æ³•ï¼Œä»–å°†ç°ä»£æ•°æ®æ ˆçš„å‘å±•åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li><strong>å¯’æ­¦çºªå¤§çˆ†å‘ I (2012 - 2016)</strong>
ä»¥Amazon Redshiftçš„å‘å¸ƒä¸ºèµ·ç‚¹ï¼Œå‚¬åŒ–äº†æ•°æ®æ ˆå…¶ä»–æ ¸å¿ƒäº§å“çš„å¢é•¿ã€‚Redshift ä½œä¸ºé¦–ä¸ªäº‘åŸç”Ÿçš„MPPæ•°æ®åº“ï¼Œæä¾›äº†ç›¸è¾ƒäºä¼ ç»Ÿ OLTP æ•°æ®åº“10-1000å€çš„æ€§èƒ½æå‡ï¼Œæ”¹å˜äº†äº§å“æ„å»ºçš„æ–¹å¼ï¼Œæä¾›äº†æ›´é«˜çš„å¯æ‰©å±•æ€§ï¼Œæ›´æ˜¯ä»¥ä½å»‰çš„ä»·æ ¼æ‰“å¼€å¸‚åœºï¼Œæˆä¸ºAWSæœ‰å²ä»¥æ¥å¢é•¿æœ€å¿«çš„æœåŠ¡ã€‚</li>
</ul>
<p>Redshift ä»¥ä¼˜å¼‚çš„æ€§èƒ½ï¼Œå¯æ‰©å±•æ€§ä¸ä½å»‰çš„ä»·æ ¼è§£å†³äº† æ•°æ®ä»“åº“æ€§èƒ½ä½ã€è¯·æ±‚æ•°é™åˆ¶ç­‰é—®é¢˜ï¼Œæ„å‘³ç€å›´ç»•è§£å†³è¿™äº›æ€§èƒ½é—®é¢˜è€Œæ„å»ºçš„ BI å’Œ ETL äº§å“éƒ½æˆä¸ºäº†é—ç•™è½¯ä»¶ï¼Œæ„å»ºé€‚é…æŠ€æœ¯æ ˆçš„æ–°äº§å“ä¹Ÿåº”è¿è€Œç”Ÿï¼Œè¿™äº›äº§å“åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå®šä¹‰äº†å¦‚ä»Šçš„MDSã€‚</p>
<ul>
<li>
<p><strong>éƒ¨ç½²æœŸ (2016 - 2020)</strong>
è¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æ ˆäº§å“ç»å†äº†æˆç†Ÿå’Œéƒ¨ç½²çš„è¿‡ç¨‹ï¼ŒåŠŸèƒ½é€æ¸ç¨³å®šï¼Œæ ¸å¿ƒåŠŸèƒ½è™½ç„¶æ²¡æœ‰æ ¹æœ¬æ€§çš„å˜åŒ–ï¼Œä½†å¯é æ€§å’Œæ€§èƒ½æœ‰æ‰€æå‡ã€‚</p>
</li>
<li>
<p><strong>å¯’æ­¦çºªå¤§çˆ†å‘ II (2020 - 2025)</strong>
è¿›å…¥ç¬¬ä¸‰é˜¶æ®µï¼Œç°ä»£æ•°æ®æ ˆæŠ€æœ¯ä¹Ÿåœ¨é€æ­¥å˜ä¸ºåŸºäºäº‘åŸç”Ÿæ•°æ®å¹³å°çš„æŠ€æœ¯é›†åˆï¼Œç”¨äºé™ä½è¿è¡Œä¼ ç»Ÿæ•°æ®å¹³å°çš„å¤æ‚æ€§ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ç°ä»£æ•°æ®åŸºç¡€æ¶æ„ä¸­é‡åˆ°çš„æŒ‘æˆ˜ï¼š</p>
<ul>
<li>æ²»ç†ï¼ˆGovernanceï¼‰ï¼šæ•°æ®æ ˆéœ€è¦æ›´å¥½çš„æ²»ç†å·¥å…·æ¥å¸®åŠ©ç®¡ç†å’Œç»´æŠ¤æ•°æ®èµ„äº§ï¼Œå¢å¼ºæ•°æ®æ ˆçš„ä¿¡ä»»åº¦å’Œä¸Šä¸‹æ–‡ã€‚</li>
<li>å®æ—¶æ€§ï¼ˆReal-Timeï¼‰ï¼šå½“å‰æ•°æ®æ ˆä¸»è¦åŸºäºæ‰¹å¤„ç†æ“ä½œï¼Œæä¾›å®æ—¶æˆ–è¿‘å®æ—¶çš„æ•°æ®å¤„ç†æœ‰åŠ©äºæ‰©å……åœºæ™¯ï¼Œé™ä½å¤„ç†å»¶è¿Ÿã€‚</li>
<li>å®Œæˆåé¦ˆå¾ªç¯ï¼ˆCompleting the Feedback Loopï¼‰ï¼šæ•°æ®ä¸ä»…ç”¨äºåˆ†æï¼Œè¿˜å¯ä»¥ç›´æ¥åé¦ˆåˆ°ä¸šåŠ¡æ“ä½œä¸­ä¼˜åŒ–å†³ç­–ã€‚</li>
<li>æ•°æ®æ¢ç´¢æ°‘ä¸»åŒ–ï¼ˆDemocratized Data Explorationï¼‰ï¼šè®©éæŠ€æœ¯ç”¨æˆ·å¯ä»¥æ›´è½»æ¾æ¢ç´¢ä¸åˆ†ææ•°æ®ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä¿ƒæˆç°ä»£æ•°æ®æ ˆå¹¿æ³›é‡‡ç”¨çš„æŠ€æœ¯å‘å±•">ä¿ƒæˆç°ä»£æ•°æ®æ ˆå¹¿æ³›é‡‡ç”¨çš„æŠ€æœ¯å‘å±•</h3>
<ul>
<li><strong>äº‘æ•°æ®ä»“åº“/æ•°æ®æ¹–çš„å´›èµ·</strong>
2000å¹´ä»£ï¼Œéšç€æ•°æ®é‡çš„æŒ‡æ•°çº§å¢é•¿ï¼Œå‡ºç°äº†Hadoopã€Verticaå’ŒMongoDBç­‰æŠ€æœ¯æ¥å¤„ç†å¤§é‡æ•°æ®ï¼Œç³»ç»Ÿé€šå¸¸æ˜¯åˆ†å¸ƒå¼SQLæˆ–NoSQLã€‚åˆ°2010å¹´ä»£åˆæœŸå’Œä¸­æœŸï¼Œäº‘æŠ€æœ¯å¼€å§‹æ™®åŠï¼ŒRedshiftã€BigQueryå’ŒSnowflakeç­‰äº‘æ•°æ®ä»“åº“è§£å†³æ–¹æ¡ˆå‡ºç°ï¼Œç›¸å¯¹äºäº‘æ•°æ®ä»“åº“ï¼Œæœ¬åœ°æŠ€æœ¯å¤æ‚æ€§ã€æˆæœ¬å’Œæ‰€éœ€ä¸“ä¸šçŸ¥è¯†è¾ƒé«˜ï¼Œä½¿äº‘æ•°æ®ä»“åº“æ›´è¢«å¹¿æ³›é‡‡ç”¨ã€‚
<ul>
<li>é€Ÿåº¦ï¼šäº‘æ•°æ®ä»“åº“æ˜¾ç€å‡å°‘äº† SQL æŸ¥è¯¢çš„å¤„ç†æ—¶é—´ã€‚</li>
<li>è¿æ¥æ€§ï¼šäº‘æ•°æ®ä»“åº“åœ¨äº‘ä¸­å°†æ•°æ®æºè¿æ¥åˆ°æ•°æ®ä»“åº“è¦å®¹æ˜“ï¼Œæ”¯æŒæ›´å¤šçš„æ ¼å¼å’Œæ•°æ®æºã€‚</li>
<li>å¯æ‰©å±•æ€§ï¼šæ”¯æŒå­˜å‚¨èµ„æºçš„åŠ¨æ€æ‰©å±•ã€‚</li>
<li>æˆæœ¬å¯æ§ï¼šäº‘æ•°æ®ä»“åº“çš„å®šä»·æ¨¡å‹æ¯”ä¼ ç»Ÿçš„æœ¬åœ°è§£å†³æ–¹æ¡ˆæ›´åŠ çµæ´»å¾—å¤šï¼Œå¯åŸºäºå­˜å‚¨çš„æ•°æ®é‡å’Œ/æˆ–æ¶ˆè€—çš„è®¡ç®—èµ„æºã€‚</li>
</ul>
</li>
<li><strong>ä»ETLåˆ°ELTçš„è½¬å˜</strong>
ä¼ ç»ŸÂ ETLï¼ˆæå–ã€è½¬æ¢ã€åŠ è½½ï¼‰çš„æ–¹å¼ç›®çš„æ˜¯é¿å…æ•°æ®ä»“åº“è¿‡è½½ï¼Œäº‘æ•°æ®ä»“åº“çš„å…´èµ·ï¼Œå­˜å‚¨ä¸å†æ˜¯é—®é¢˜ï¼Œè½¬å‘ELTï¼ˆæå–ã€åŠ è½½ã€è½¬æ¢ï¼‰æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š
<ul>
<li>æ€§èƒ½å’Œé€Ÿåº¦ï¼šELTå¯ä»¥åˆ©ç”¨äº‘æ•°æ®ä»“åº“çš„è®¡ç®—èƒ½åŠ›ï¼Œå‡å°‘äº†æ•°æ®åœ¨ä¸åŒç³»ç»Ÿä¹‹é—´çš„ç§»åŠ¨æ¬¡æ•°æ¥åŠ é€Ÿæ•°æ®å¤„ç†é€Ÿåº¦ã€‚</li>
<li>çµæ´»æ€§ï¼šELTæ–¹æ³•æ”¯æŒæ›´å®æ—¶çš„æ•°æ®å¤„ç†ï¼Œèƒ½å¤Ÿæ›´å®¹æ˜“åœ°é›†æˆæ¥è‡ªä¸åŒæ ¼å¼å’Œæ¥æºçš„æ•°æ®ï¼Œè€Œæ— éœ€æå‰è¿›è¡Œå¤æ‚çš„è½¬æ¢ã€‚</li>
<li>ç®€åŒ–æˆæœ¬ï¼šELTæ–¹æ³•å‡å°‘äº†å¯¹æºç³»ç»Ÿå’Œä¸­é—´ç³»ç»Ÿçš„ä¾èµ–ï¼Œä»è€Œå‡å°‘äº†ç¡¬ä»¶å’Œè½¯ä»¶æˆæœ¬ã€‚</li>
<li>ç®€åŒ–æ•°æ®æ¶æ„ï¼šELTæ–¹æ³•ç®€åŒ–äº†æ•°æ®é›†æˆæµç¨‹ï¼Œå‡å°‘äº†æ•°æ®ç§»åŠ¨å’Œé‡å¤å­˜å‚¨ï¼Œé™ä½äº†æ¶æ„å¤æ‚æ€§ï¼Œä¹Ÿç®€åŒ–äº†ç»´æŠ¤å·¥ä½œï¼Œæ˜“äºæ‰©å±•ã€‚

<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/11d1f375a430c923b6ef397a355750a7_MD5.jpeg">
    <img src="/attachment/11d1f375a430c923b6ef397a355750a7_MD5.jpeg" alt=""  />
    </a>
</div></li>
</ul>
</li>
<li><strong>è‡ªåŠ©åˆ†æä¸æ•°æ®æ°‘ä¸»åŒ–</strong>
äº‘æ•°æ®ä»“åº“çš„å…´èµ·ä¸ä»…ä¿ƒè¿›äº†ä» ETL åˆ° ELT çš„è¿‡æ¸¡ï¼Œè¿˜ä¿ƒè¿›äº†BIå·¥å…·çš„å¹¿æ³›é‡‡ç”¨ï¼Œä½¿æ›´å¤šäººèƒ½å¤Ÿè®¿é—®æ•°æ®å¹¶åšå‡ºæ•°æ®é©±åŠ¨çš„å†³ç­–ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨ç°ä»£æ•°æ®æ ˆæ¥é‡å¡‘æ•°æ®å·¥ç¨‹">ä½¿ç”¨ç°ä»£æ•°æ®æ ˆæ¥é‡å¡‘æ•°æ®å·¥ç¨‹</h2>
<h3 id="ç°ä»£æ•°æ®æ ˆçš„å‘å±•è¶‹åŠ¿å¯¹æ•°æ®å·¥ç¨‹çš„å½±å“">ç°ä»£æ•°æ®æ ˆçš„å‘å±•è¶‹åŠ¿å¯¹æ•°æ®å·¥ç¨‹çš„å½±å“</h3>
<ol>
<li><strong>æ•°æ®åŸºç¡€è®¾æ–½å³æœåŠ¡</strong>ï¼šéšç€äº‘æœåŠ¡çš„å…´èµ·ï¼Œæ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰çš„è§’è‰²æ­£åœ¨é€æ¸æ¶ˆå¤±ï¼Œè€Œæ•°æ®åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆçš„è§’è‰²æ­£åœ¨å‘äº‘æœåŠ¡è½¬ç§»ã€‚Snowflakeã€BigQueryã€Redshiftç­‰æä¾›çš„æŒ‰éœ€ä»˜è´¹ã€å…¨æ‰˜ç®¡ã€å¼¹æ€§æœåŠ¡çš„æ‰˜ç®¡äº‘æ•°æ®ä»“åº“æ­£åœ¨æˆä¸ºä¸»æµã€‚</li>
<li><strong>æ•°æ®é›†æˆæœåŠ¡</strong>ï¼šå¦‚Airbyteç­‰æ•°æ®é›†æˆå¹³å°çš„å…´èµ·å‡å°‘äº†æ•°æ®å·¥ç¨‹å¸ˆå¤„ç†REST APIå’Œåº”ç”¨ç³»ç»Ÿå­¤å²›æ•°æ®é›†æˆçš„å·¥ä½œé‡ã€‚</li>
<li><strong>åå‘ETL</strong>ï¼šåå‘ETLæ˜¯å°†æ•°æ®ä»æ•°æ®ä»“åº“é›†æˆåˆ°åº”ç”¨ç³»ç»Ÿä¸­çš„æ–°æ–¹æ³•ï¼Œå¦‚é€šè¿‡High Touch ã€ Census å’Œ Airbyte ç®€åŒ–æ•°æ®åŒæ­¥è¿‡ç¨‹ã€‚</li>
<li><strong>ELT&gt;ETL</strong>ï¼šé‡‡ç”¨æå–ã€åŠ è½½ã€è½¬æ¢ï¼ˆELTï¼‰æ›´å¥‘åˆç°ä»£æ•°æ®æ ˆï¼Œè¿™ç§æ–¹æ³•æ›´åˆç†åœ°åˆ©ç”¨äº†åˆ†å¸ƒå¼äº‘æ•°æ®åº“çš„ä¼˜åŒ–æŸ¥è¯¢å¼•æ“ã€‚</li>
<li><strong>æ¨¡æ¿åŒ–çš„SQLå’ŒYAML</strong>ï¼šé‡‡ç”¨æ¨¡æ¿åŒ–çš„SQLå’ŒYAMLæ¥ç®¡ç†ELTä¸­çš„&quot;T&rdquo;ï¼ˆè½¬æ¢ï¼‰éƒ¨åˆ†ã€‚SQLæœ‰ç€æ ‡å‡†åŒ–ã€å®Œå–„ã€æ˜“äºå­¦ä¹ å’Œå£°æ˜æ€§çš„ç‰¹ç‚¹ã€‚å°†æ­¤ä¸ Jinja ç­‰æ¨¡æ¿è¯­è¨€ç»“åˆèµ·æ¥ï¼Œå¯ä»¥ä½¿å…¶å‚æ•°åŒ–å¹¶ä¸”æ›´åŠ åŠ¨æ€ã€‚ç›¸æ¯”ä»¥å‰çš„ä»¥ä»£ç ä¸ºä¸­å¿ƒçš„æ–¹æ³•ï¼Œä½¿ç”¨è¿™ç§çº¯æ–‡æœ¬æ–‡ä»¶æ–¹å¼æ¥è¡¨è¾¾æœ‰ç€æºä»£ç æ§åˆ¶ï¼Œå¯æŒç»­é›†æˆå’Œéƒ¨ç½²çš„ç‰¹ç‚¹ï¼Œæ›´å¥½è¿›è¡ŒDataOpså®æ–½ã€‚</li>
<li><strong>è®¡ç®—æ¡†æ¶</strong>ï¼šåœ¨è½¬æ¢å±‚å‡ºç°äº†æ›´å¤šçš„æŠ½è±¡ï¼Œå¦‚æŒ‡æ ‡å±‚(Transform.coã€MetriQL)ã€ç‰¹å¾å·¥ç¨‹æ¡†æ¶ï¼ˆMLopsï¼‰ã€A/B Testæ¡†æ¶ç­‰ã€‚</li>
<li><strong>è¯­ä¹‰å±‚å˜åŒ–</strong>ï¼šè¯­ä¹‰å±‚æ˜¯ä»æŠ€æœ¯å®ç°å±‚è¡ç”Ÿå‡ºæ¥çš„ä¸šåŠ¡æŠ½è±¡â€”â€”ç»Ÿä¸€ç»´æŠ¤ä¸šåŠ¡é€»è¾‘ã€å±‚æ¬¡ç»“æ„ã€è®¡ç®—ç­‰çš„æ¨¡å‹å±‚ã€‚è¯­ä¹‰å±‚ä½œä¸ºä¸šåŠ¡æŠ½è±¡å±‚ï¼Œæ­£åœ¨é€æ­¥è¿›å…¥è½¬æ¢å±‚ï¼ˆdbtã€Airflowï¼‰ä¸­ï¼Œé€šå¸¸ä½œä¸ºç»´åº¦å»ºæ¨¡ä¹‹ä¸Šçš„ä¸€å±‚ï¼Œä»¥åˆ›å»ºæ˜“äºä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å£°æ˜å¼è¯­ä¹‰åœ¨æºä»£ç ä¸­æ§åˆ¶è€Œä¸æ˜¯åœ¨ç‰¹å®šçš„ GUI ä¸­è¿›è¡Œç®¡ç†ã€‚</li>
<li><strong>å»ä¸­å¿ƒåŒ–æ²»ç†</strong>ï¼šæ•°æ®æ²»ç†æ­£åœ¨ä»é›†ä¸­å¼å‘åˆ†æ•£å¼è½¬å˜ï¼Œå„ä¸ªé¢†åŸŸä¸“å®¶å›¢é˜Ÿæ‹¥æœ‰å¹¶é©±åŠ¨æ•°æ®ç³»ç»Ÿï¼Œè´Ÿè´£æ•°æ®è´¨é‡ SLA å¹¶å‘å¸ƒæŒ‡æ ‡å’Œç»´åº¦ä»¥ä¾›å…¶ä»–éƒ¨é—¨ä½¿ç”¨ã€‚</li>
</ol>
<h3 id="ç°ä»£æ•°æ®æ ˆç»„æˆéƒ¨åˆ†">ç°ä»£æ•°æ®æ ˆç»„æˆéƒ¨åˆ†</h3>
<p>
<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/0c78cda041a8ecc55a098fc53f0b66b3_MD5.jpeg">
    <img src="/attachment/0c78cda041a8ecc55a098fc53f0b66b3_MD5.jpeg" alt=""  />
    </a>
</div></p>
<p>ç”±äºç°ä»£æ•°æ®æ ˆå·¥å…·å’ŒæŠ€æœ¯çš„æ•°é‡ä¸æ–­å¢åŠ ï¼ŒåŠŸèƒ½å˜å¾—è¶ŠåŠ å¤æ‚ï¼Œä¸Šå›¾æ˜¯ç°ä»£æ•°æ®æ ˆæ¶æ„çš„ä¸€ä¸ªç¤ºä¾‹å›¾ï¼Œé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>æ•°æ®é›†æˆï¼ˆData Integrationï¼‰</strong>ï¼šå¦‚Airbyteã€Fivetranã€Stitchç­‰å·¥å…·ï¼Œè´Ÿè´£ä»ä¸åŒç³»ç»Ÿæå–å’ŒåŠ è½½æ•°æ®åˆ°é›†ä¸­å¼ç³»ç»Ÿä¸­ï¼ˆå¦‚æ•°æ®ä»“åº“ï¼‰ã€‚</li>
<li><strong>æ•°æ®è½¬æ¢/å»ºæ¨¡ï¼ˆData Transformation/Modelingï¼‰</strong>ï¼šå¦‚dbtã€Transformç­‰å·¥å…·ï¼Œç”¨äºå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºå¯åˆ†æçš„ç»“æ„åŒ–æ•°æ®ã€‚</li>
<li><strong>ä»»åŠ¡ç¼–æ’ï¼ˆOrchestrationï¼‰</strong>ï¼šå¦‚Airflowã€Dagsterç­‰å·¥å…·ï¼Œç”¨äºå¯¹æ•°æ®è½¬æ¢ä»»åŠ¡è¿›è¡Œè°ƒåº¦ä¸ç¼–æ’ã€‚æ•°æ®ç¼–æ’å¯è‡ªåŠ¨æ‰§è¡Œä¸æ•°æ®æ‘„å–ç›¸å…³çš„æµç¨‹ï¼Œä¾‹å¦‚å°†å¤šä¸ªæ¥æºçš„æ•°æ®æ±‡é›†åœ¨ä¸€èµ·â€‹â€‹ã€ç»„åˆå¹¶å‡†å¤‡è¿›è¡Œåˆ†æã€‚</li>
<li><strong>æ•°æ®ä»“åº“ï¼ˆData Warehousingï¼‰</strong>ï¼šå¦‚äº‘æ•°æ®ä»“åº“Snowflakeã€BigQueryã€Redshiftç­‰ï¼Œä¹Ÿæœ‰å¼€æºæ•°æ®ä»“åº“å¦‚Dorisã€Starrocksã€ClickHouseç­‰ï¼›æ•°æ®ä»“åº“æ˜¯ç°ä»£æ•°æ®æ ˆçš„ä¸­å¿ƒï¼Œè´Ÿè´£å­˜å‚¨å’Œç®¡ç†æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šæµå…¥å’Œæµå‡ºæ•°æ®ä»“åº“ã€‚</li>
<li><strong>åå‘ETLï¼ˆReverse ETLï¼‰</strong>ï¼šå¦‚Hightouchã€Censusç­‰å·¥å…·ï¼Œå°†æ•°æ®ä»æ•°æ®ä»“åº“ç§»åŠ¨åˆ°å¤–éƒ¨ç³»ç»Ÿï¼Œåå‘ ETL å…è®¸æ‚¨å°†æ•°æ®ä»“åº“ä¸­çš„æ•°æ®æä¾›ç»™ä¸šåŠ¡å›¢é˜Ÿã€‚</li>
<li><strong>å•†ä¸šæ™ºèƒ½ä¸åˆ†æï¼ˆBI &amp; Analyticsï¼‰</strong>ï¼šå¦‚Supersetã€Metabaseã€Lookerç­‰ï¼Œæä¾›è®¿é—®å’Œåˆ†ææ•°æ®çš„å·¥å…·ã€‚</li>
<li><strong>æ•°æ®å¯è§‚æµ‹æ€§ï¼ˆData Observabilityï¼‰</strong>ï¼šå¦‚Amazon CloudWatchã€Datadogç­‰ï¼Œç”¨äºç›‘æ§æ•°æ®è´¨é‡å’Œæ€§èƒ½ã€‚æ•°æ®å¯è§‚æµ‹æ€§æ˜¯DevOpsä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œé€‚ç”¨äºæ•°æ®ã€æ•°æ®ç®¡é“å’Œå¹³å°çš„ç¯å¢ƒï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–æ¥ç›‘æ§æ•°æ®å‡†ç¡®æ€§ä¸å®Œæ•´æ€§ã€æ•°æ®ç®¡é“æ‰§è¡ŒçŠ¶æ€ã€‚</li>
</ul>
<h2 id="åŸºäºdbtairbytedagsterçš„å¼€æºç°ä»£æ•°æ®æ ˆå®è·µ">åŸºäºdbtã€Airbyteã€Dagsterçš„å¼€æºç°ä»£æ•°æ®æ ˆå®è·µ</h2>
<h3 id="ç›®æ ‡">ç›®æ ‡</h3>
<p>åŸºäºå¦‚ä¸‹å¼€æºæŠ€æœ¯ï¼Œå¯¹ç°ä»£æ•°æ®æ ˆçš„éªŒè¯å®ç°ï¼š</p>
<ul>
<li>clickhouse-ä½œä¸ºæ•°æ®ä»“åº“</li>
<li>Airbyte-ç”¨äºæ•°æ®é›†æˆ</li>
<li>dbt-è¿›è¡Œæ•°æ®è½¬æ¢å’Œè´¨é‡æ£€æµ‹</li>
<li>Dagster-è¿›è¡Œä»»åŠ¡ç¼–æ’</li>
<li>Metabase-ä½œä¸ºBIåˆ†æå·¥å…·</li>
</ul>
<p>å®Œæ•´ä»£ç å¯ä»¥åœ¨è¯¥Github Repoä¸­è·å¾—ï¼š<a href="https://github.com/ChinaLHR/shovel-modern-data-stack">https://github.com/ChinaLHR/shovel-modern-data-stack</a>ã€‚</p>
<h3 id="æ•°æ®æµ">æ•°æ®æµ</h3>
<p>ä¸šåŠ¡æ•°æ®åº“imdbæ•°æ®é›†å¦‚ä¸‹æ‰€ç¤ºï¼ˆè¯¥æ•°æ®æºè‡ª<a href="https://relational-data.org/dataset/IMDb">https://relational-data.org/dataset/IMDb</a>ï¼‰ï¼š</p>
<div class="mermaid">
    
classDiagram
direction BT
class actors {
   varchar(100) first_name
   varchar(100) last_name
   char(1) gender
   int film_count
   int id
}
class directors {
   varchar(100) first_name
   varchar(100) last_name
   int id
}
class directors_genres {
   int director_id
   varchar(100) genre
   float prob
}
class movies {
   varchar(100) name
   int year
   float rank
   int id
}
class movies_directors {
   int director_id
   int movie_id
}
class movies_genres {
   int movie_id
   varchar(100) genre
}
class roles {
   int actor_id
   int movie_id
   varchar(100) role
}

directors_genres  -->  directors : director_id-id
movies_directors  -->  directors : director_id-id
movies_directors  -->  movies : movie_id-id
movies_genres  -->  movies : movie_id-id
roles  -->  actors : actor_id-id
roles  -->  movies : movie_id-id

</div>
<p>é€šè¿‡Airbyteå°†ä¸šåŠ¡æ•°æ®åº“çš„åŸå§‹æ•°æ®åŠ è½½åˆ°æ•°æ®ä»“åº“ä¸­ï¼Œå³ODSå±‚æ•°æ®ï¼›éšåé€šè¿‡dbtå°†æ•°æ®ä»“åº“ä¸­çš„ODSå±‚æ•°æ®è¿›è¡Œæ•°æ®è½¬æ¢ä¸ºDWDã€DWSç­‰æ˜ç»†ã€æ±‡æ€»å±‚æ•°æ®ï¼›Dagsteråœ¨è¿™å½“ä¸­å……å½“Airbyteä¸dbtçš„åè°ƒå™¨ï¼Œè¿›è¡ŒåŒæ­¥ã€è½¬æ¢ä»»åŠ¡çš„ç¼–æ’ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè§¦å‘å’Œç›‘æ§è¯¥è¿‡ç¨‹ã€‚</p>
<p>å®Œæ•´çš„æ•°æ®æµå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>
<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/064dbaefa8a4d7db6c6b64ade5e836e0_MD5.jpeg">
    <img src="/attachment/064dbaefa8a4d7db6c6b64ade5e836e0_MD5.jpeg" alt=""  />
    </a>
</div></p>
<h3 id="æ•°æ®ä»“åº“-clickhouse">æ•°æ®ä»“åº“-ClickHouse</h3>
<p><a href="https://github.com/ClickHouse/ClickHouse">ClickHouse</a>æ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æ (OLAP)çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ (DBMS)ï¼Œæ”¯æŒæ ‡å‡†çš„SQLè¯­è¨€ï¼Œç”±Yandexå…¬å¸å¼€å‘ï¼Œäº2016å¹´å¼€æºã€‚</p>
<p>ClickHouseé‡‡ç”¨äº†åˆ—å¼å­˜å‚¨ç»“æ„ï¼Œä»¥åŠä½¿ç”¨äº†æ•°æ®å‹ç¼©å’Œä»£ç ç”Ÿæˆç­‰æŠ€æœ¯ï¼Œä½¿å…¶åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶æœ‰ç€æé«˜çš„æ€§èƒ½ä¼˜åŠ¿ï¼›å…¶åŸºæœ¬æ¶æ„é‡‡ç”¨å…¸å‹çš„åˆ†ç»„å¼åˆ†å¸ƒå¼æ¶æ„ï¼Œé€šè¿‡åˆ†ç‰‡å’Œå‰¯æœ¬å®ç°é«˜å¯é æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¾ˆé€‚åˆç”¨äºæœ¬åœ°æ•°æ®ä»“åº“ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬é€‰æ‹©å®ƒçš„åŸå› ã€‚</p>
<h3 id="åŸºäºairbyteè¿›è¡Œæ•°æ®é›†æˆ">åŸºäºAirbyteè¿›è¡Œæ•°æ®é›†æˆ</h3>
<p><a href="https://github.com/airbytehq/airbyte">Airbyte</a> æ˜¯ä¸€æ¬¾å¼€æºæ•°æ®é›†æˆåŸºç¡€è®¾æ–½ï¼Œç”¨äºæ„å»ºæå–å’ŒåŠ è½½(EL)æ•°æ®ç®¡é“ã€‚Airbyteæ‹¥æœ‰å¾ˆé«˜çš„æ‰©å±•æ€§å’Œæ˜“ç”¨æ€§ï¼Œæä¾›äº†å¤šè¾¾300+è¿æ¥å™¨ï¼Œä¹Ÿæ”¯æŒæ„å»ºè‡ªå®šä¹‰è¿æ¥å™¨ã€‚</p>
<p>AirbyteåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li><strong>connector catalog</strong>ï¼šåŒ…å«350å¤šä¸ªé¢„å»ºè¿æ¥å™¨ï¼Œä»¥åŠä½ä»£ç è¿æ¥å™¨ç”Ÿæˆå™¨ï¼Œæ”¯æŒæ‰©å±• airbyte çš„åŠŸèƒ½ä»¥å®ç°è‡ªå®šä¹‰è¿æ¥å™¨ã€‚</li>
<li><strong>platform</strong>ï¼šæä¾›é…ç½®å’Œæ‰©å±•æ•°æ®é›†æˆæ“ä½œæ‰€éœ€çš„æœåŠ¡ï¼Œæ”¯æŒäº‘ç®¡ç†æˆ–è‡ªæˆ‘ç®¡ç†æ–¹å¼ã€‚</li>
<li><strong>user interface</strong>ï¼šÂ æä¾›UIã€PyAirbyteï¼ˆPython åº“ï¼‰ã€API å’Œ Terraform Providerã€‚</li>
</ul>
<p>é€šè¿‡Airbyteå°†MySQLä¸šåŠ¡æ•°æ®åº“çš„åŸå§‹æ•°æ®åŠ è½½åˆ°ClickHouseæ•°æ®ä»“åº“ä¸­ï¼Œéœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>æ·»åŠ MySQLä¸šåŠ¡æ•°æ®åº“åˆ°airbyte sourcesä¸­ã€‚</li>
<li>æ·»åŠ ClickHouseæ•°æ®ä»“åº“åˆ°airbyte destinationsä¸­ã€‚</li>
<li>é…ç½®airbyte connectionsï¼Œè¿é€šsources åˆ° destinationsï¼Œè®¾ç½®åŒæ­¥ç­–ç•¥ä¸è°ƒåº¦ç­–ç•¥ï¼Œå°†ä¸šåŠ¡æ•°æ®åº“çš„æ•°æ®é›†åŠ è½½åˆ°æ•°æ®ä»“åº“ä¸­ã€‚

<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/8bee5f7d1c8c436d2703fe708467a428_MD5.jpeg">
    <img src="/attachment/8bee5f7d1c8c436d2703fe708467a428_MD5.jpeg" alt=""  />
    </a>
</div></li>
</ol>
<p>åŒæ­¥å®Œæˆåè¡¨ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>name                                    |
----------------------------------------+
data_center_raw__stream_actors          |
data_center_raw__stream_directors       |
data_center_raw__stream_movies          |
data_center_raw__stream_movies_directors|
data_center_raw__stream_movies_genres   |
data_center_raw__stream_roles           |

create table data_center_raw__stream_actors  
(  
    _airbyte_raw_id       String,  
    _airbyte_data         String,               -- åŸå§‹æ•°æ®ï¼ŒJSONæ ¼å¼  
    _airbyte_extracted_at DateTime64(3, 'Asia/Shanghai') default now(),  
    _airbyte_loaded_at Nullable(DateTime64(3, 'Asia/Shanghai'))  
) engine = MergeTree PRIMARY KEY _airbyte_raw_id  
  ORDER BY _airbyte_raw_id  
  SETTINGS index_granularity = 8192;
</code></pre><p>åŒæ­¥æ¨¡å¼æ§åˆ¶airbyteå¦‚ä½•ä»æºè¯»å–æ•°æ®å¹¶å†™å…¥ç›®æ ‡ï¼Œairbyteæä¾›äº†å¤šç§åŒæ­¥æ¨¡å¼ï¼š</p>
<ul>
<li>å¢é‡è¿½åŠ </li>
<li>å¢é‡è¿½åŠ -åˆ é™¤é‡å¤æ•°æ®</li>
<li>å…¨é‡åˆ·æ–°-è¦†ç›–</li>
<li>å…¨é‡åˆ·æ–°-é™„åŠ </li>
</ul>
<p>connectionå¦‚ä½•ä»sourceè¯»å–æ•°æ®ï¼š</p>
<ul>
<li>å¢é‡ï¼šè¯»å–è‡ªä¸Šæ¬¡åŒæ­¥ä½œä¸šåæ·»åŠ åˆ°sourceçš„è®°å½•ï¼Œä¸€èˆ¬é€šè¿‡cursor field æˆ–è€…change data capture (CDC)ã€‚</li>
<li>å…¨é‡ï¼šæ¯æ¬¡åŒæ­¥ä½œä¸šéƒ½å¯¹sourceçš„è®°å½•è¿›è¡Œå…¨é‡è¯»å–ã€‚</li>
</ul>
<p>connectionå¦‚ä½•å‘destinationå†™å…¥æ•°æ®:</p>
<ul>
<li>è¦†ç›–ï¼šåˆ é™¤destinationä¸­çš„ç°æœ‰æ•°æ®è¿›è¡Œè¦†ç›–ã€‚</li>
<li>è¿½åŠ ï¼šå°†æ•°æ®è¿½åŠ åˆ°destinationä¸­ã€‚</li>
<li>åˆ é™¤é‡å¤æ•°æ®ï¼šé¦–å…ˆå°†æ•°æ®è¿½åŠ åˆ°destinationä¸­ï¼Œæœ€ç»ˆè¡¨é€šè¿‡ä½¿ç”¨ä¸»é”®å¯¹ä¸­é—´è¡¨è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤è€Œç”Ÿæˆã€‚</li>
</ul>
<h3 id="åŸºäºdbtè¿›è¡Œæ•°æ®è½¬æ¢">åŸºäºdbtè¿›è¡Œæ•°æ®è½¬æ¢</h3>
<p><a href="https://github.com/dbt-labs/dbt-core">dbt</a>æ˜¯ä¸€ä¸ªå¼€æºå·¥å…·ï¼Œä½¿æ•°æ®ä»ä¸šè€…èƒ½å¤Ÿè½»æ¾è¿›è¡Œæ•°æ®è½¬æ¢ã€‚ä½¿ç”¨äº†Jinjaè½»é‡çº§æ¨¡æ¿è¯­è¨€ï¼Œåœ¨SQLä¸­ä½¿ç”¨Jinjaæä¾›äº†ä¸€ç§åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨æ§åˆ¶ç»“æ„çš„æ–¹æ³•ï¼Œä½¿ç”¨dbtå¯ä»¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€æ¨¡å—åŒ–ã€å¯ç§»æ¤æ€§ã€CI/CD å’ŒDocsç­‰è½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µï¼Œæ›´å¥½åœ°å®æ–½DataOpsã€‚</p>
<p><strong>é€šè¿‡dbtä¼˜åŒ–å·¥ä½œæµç¨‹</strong></p>
<ul>
<li>åªéœ€è¦ä½¿ç”¨SQL Statementæˆ–Python DataFrameç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›éœ€è¦çš„æ•°æ®é›†ï¼Œdbt è´Ÿè´£å…·ä½“åŒ–çš„å®ç°ï¼ˆåˆ›å»ºæ•°æ®è¡¨ã€è¿›è¡Œæ•°æ®è½¬æ¢ï¼‰ã€‚</li>
<li>å‘å¸ƒç‰¹å®šæ•°æ®æ¨¡å‹çš„è§„èŒƒç‰ˆæœ¬ï¼Œå¯¹å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œå°è£…ï¼Œè¯¥æ¨¡å‹ä¸Šçš„åˆ†æåŠ¨ä½œéƒ½å°†åŒ…å«ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€é‡æ–°å®ç°ã€‚</li>
<li>é€šè¿‡metadataæ‰¾åˆ°long-runningæ¨¡å‹ï¼Œdbtçš„å¢é‡æ¨¡å‹ï¼ˆincremental modelsï¼‰å¯ä»¥å¾ˆå¥½åœ°è¿›è¡Œä¼˜åŒ–ã€‚</li>
<li>åˆ©ç”¨Jinjaæ¨¡æ¿ã€macrosã€Hooksã€operationsã€package managementæ¥ç¼–å†™dbté¡¹ç›®ï¼›<code>ref()</code>å‡½æ•°æ¥å®ç°æ¨¡å‹çš„å¼•ç”¨ï¼Œä»¥æ”¯æŒå †å çš„æ¨¡å‹å…³ç³»ã€‚</li>
</ul>
<p><strong>dbtä¸­çš„æ¨¡å‹</strong>
dbtå¼•å…¥äº†æ¨¡å‹çš„æ¦‚å¿µï¼Œå®šä¹‰ä¸ºä¸€ä¸ª SQL è¯­å¥ã€‚æ¨¡å‹å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿›è¡Œç‰©åŒ–(materializedï¼Œå³æ¨¡å‹çš„æ„å»ºç­–ç•¥)ã€‚åœ¨dbtä¸­ï¼Œæ¨¡å‹å¯ä»¥äº¤å‰å¼•ç”¨å’Œåˆ†å±‚ï¼Œä»¥æ„å»ºæ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µã€‚dbtå¯ä»¥è¯†åˆ«æ¨¡å‹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ä»¥é€‚å½“çš„é¡ºåºåˆ›å»ºå®ƒä»¬ã€‚dbtæä¾›äº†4ç§ç‰©åŒ–ç±»å‹ï¼š</p>
<ul>
<li>ä¸´æ—¶(ephemeral): ä¸´æ—¶æ¨¡å‹ä¸æ„å»ºåœ¨æ•°æ®åº“ä¸­ï¼Œè€Œæ˜¯ä½œä¸ºå…¬å…±è¡¨è¡¨è¾¾å¼è¢«å¼•å…¥åˆ°ä¾èµ–æ¨¡å‹ä¸­ã€‚</li>
<li>è§†å›¾(view): æ¯æ¬¡è¿è¡Œæ—¶éƒ½ä¼šé‡å»ºæ¨¡å‹ä½œä¸ºè§†å›¾ã€‚</li>
<li>ç‰©åŒ–è§†å›¾(materialized_view): å…è®¸åœ¨ç›®æ ‡æ•°æ®åº“ä¸­åˆ›å»ºå’Œç»´æŠ¤ç‰©åŒ–è§†å›¾ã€‚</li>
<li>å®ä½“è¡¨(table): æ¯æ¬¡è¿è¡Œæ—¶éƒ½ä¼šå°†æ¨¡å‹é‡å»ºä¸ºè¡¨æ ¼ã€‚</li>
<li>å¢é‡(incremental): å¢é‡æ¨¡å‹å…è®¸ dbt è‡ªä¸Šæ¬¡è¿è¡Œè¯¥æ¨¡å‹ä»¥æ¥å°†è®°å½•æ’å…¥æˆ–æ›´æ–°åˆ°è¡¨ä¸­ã€‚</li>
</ul>
<p><strong>å®‰è£…dbtå¹¶è¿æ¥åˆ°ClickHouse</strong></p>
<ul>
<li>å®‰è£…dbt-coreä¸dbt-clickhouseæ’ä»¶</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pip install dbt-core
pip install dbt-clickhouse
</code></pre></div><ul>
<li>åˆå§‹åŒ–dbté¡¹ç›®å¹¶è¿æ¥åˆ°clickhouse</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">dbt init data_center

<span style="color:#75715e"># åˆå§‹åŒ–åé¡¹ç›®ç»“æ„å¦‚ä¸‹</span>
.
â”œâ”€â”€ analyses
â”œâ”€â”€ dbt_packages
â”œâ”€â”€ macros
â”œâ”€â”€ models
â”œâ”€â”€ README.md
â”œâ”€â”€ seeds
â”œâ”€â”€ snapshots
â”œâ”€â”€ dbt_project.yml
â””â”€â”€ tests

<span style="color:#75715e"># åœ¨modelç›®å½•ä¸‹åˆ›å»ºimdbæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾imdbæ¨¡å‹</span>
mkdir models/imdb

<span style="color:#75715e"># æ›´æ–°dbt_project.ymlï¼ŒæŒ‡å®šimdbæ¨¡å‹çš„é»˜è®¤materializedï¼Œtagsï¼Œdagster meta groupä¿¡æ¯</span>
models:
Â  dbt_data_center:
Â  Â  imdb:
Â  Â  Â  <span style="color:#66d9ef">+materialized</span>: view
Â  Â  Â  <span style="color:#66d9ef">+tags</span>: <span style="color:#e6db74">&#34;imdb&#34;</span>
Â  Â  Â  +meta:
Â  Â  Â  Â  dagster:
Â  Â  Â  Â  Â  <span style="color:#66d9ef">group</span>: <span style="color:#e6db74">&#34;dbt_imdb&#34;</span>

<span style="color:#75715e"># æ›´æ–° ~/.dbt/profiles.ymlï¼Œæ·»åŠ clickhouseè¿æ¥ä¿¡æ¯</span>
clickhouse_data_center:
  <span style="color:#66d9ef">target</span>: dev
  outputs:
    dev:
      <span style="color:#66d9ef">type</span>: clickhouse
      <span style="color:#66d9ef">schema</span>: data_center
      <span style="color:#66d9ef">host</span>: your clickhouse host
      <span style="color:#66d9ef">port</span>: your clickhouse port
      <span style="color:#66d9ef">user</span>: your clickhouse user
      <span style="color:#66d9ef">password</span>: <span style="color:#e6db74">&#39;your clickhouse password&#39;</span>
      <span style="color:#66d9ef">secure</span>: False

<span style="color:#75715e"># åœ¨data_centeré¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œdbt debugç¡®è®¤ç¯å¢ƒé…ç½®</span>
dbt debug
</code></pre></div><p><strong>ä½¿ç”¨dbtè½¬æ¢airbyteé›†æˆçš„åŸå§‹æ•°æ®</strong></p>
<p>é€šè¿‡airbyteä»ä¸šåŠ¡æ•°æ®åº“åŠ è½½åˆ°æ•°æ®ä»“åº“çš„åŸå§‹æ•°æ®ä»¥JSONå­—ç¬¦ä¸²å­˜å‚¨åœ¨_airbyte_dataå­—æ®µä¸­ï¼Œéœ€è¦ä½¿ç”¨dbtå°†å…¶è½¬æ¢ä¸ºè§„èŒƒåŒ–è§†å›¾ï¼Œä»¥ä¾¿åç»­è½¬æ¢ä¸ºå¯ä¾›åˆ†æçš„ç»´åº¦æ¨¡å‹ã€‚

<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/a34a437c81e29a31c1103df8cdf996e1_MD5.jpeg">
    <img src="/attachment/a34a437c81e29a31c1103df8cdf996e1_MD5.jpeg" alt=""  />
    </a>
</div></p>
<ul>
<li>åœ¨models/imdb/schema.ymlæ–‡ä»¶ä¸­å®šä¹‰airbyteåŠ è½½åˆ°æ•°æ®ä»“åº“çš„è¡¨ï¼Œå¯åœ¨dbtä¸­ç”¨äºmacrosï¼Œä½¿ç”¨<code>{{ source () }}</code>å‡½æ•°è¿˜ä¼šåœ¨æ¨¡å‹å’Œæºè¡¨ä¹‹é—´åˆ›å»ºä¾èµ–å…³ç³»ã€‚å®šä¹‰å…³è”çš„dagster asset metaä¿¡æ¯ï¼Œä½¿dagsterå¯ä»¥è¯†åˆ«åˆ°å…³è”çš„upstream assetã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">version</span>: <span style="color:#ae81ff">2</span>
sources:
- <span style="color:#66d9ef">name</span>: data_center
  tables:
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_actors
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_actors&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_directors
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_directors&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_directors_genres
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_directors_genres&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_movies          
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_movies&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_movies_directors
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_movies_directors&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_movies_genres   
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_movies_genres&#34;</span>]
  - <span style="color:#66d9ef">name</span>: data_center_raw__stream_imdb_roles
    meta:
      dagster:
        <span style="color:#66d9ef">asset_key</span>: [<span style="color:#e6db74">&#34;imdb_roles&#34;</span>]  
</code></pre></div><ul>
<li>åˆ›å»ºmodels/imdb/ods_imdb_actors.sql &hellip; æ¨¡å‹ï¼Œä½¿ç”¨materialized viewå°†åŸå§‹è¡¨è½¬æ¢ä¸ºodså±‚æ¨¡å‹ã€‚æ¨¡å‹ä¼šåœ¨æ¯æ¬¡è¿è¡Œæ—¶é€šè¿‡ClickHouseä¸­çš„Â <code>CREATE VIEW AS</code>Â è¯­å¥é‡æ–°æ„å»ºä¸ºviewã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#960050;background-color:#1e0010">{{</span> config(materialized<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;view&#39;</span>) <span style="color:#960050;background-color:#1e0010">}}</span>

<span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">source</span> <span style="color:#66d9ef">AS</span> (
    <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#960050;background-color:#1e0010">{{</span> <span style="color:#66d9ef">source</span>(<span style="color:#e6db74">&#39;data_center&#39;</span>, <span style="color:#e6db74">&#39;data_center_raw__stream_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>
),


ods_imdb_actors <span style="color:#66d9ef">as</span> (
    <span style="color:#66d9ef">SELECT</span> 
        toUInt32(JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;id&#39;</span>)) <span style="color:#66d9ef">AS</span> id,
        toUInt32(JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;film_count&#39;</span>)) <span style="color:#66d9ef">AS</span> film_count,
        JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;first_name&#39;</span>) <span style="color:#66d9ef">AS</span> first_name,
        JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;last_name&#39;</span>) <span style="color:#66d9ef">AS</span> last_name,
        JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;gender&#39;</span>) <span style="color:#66d9ef">AS</span> gender,
        parseDateTimeBestEffort(JSONExtractString(_airbyte_data, <span style="color:#e6db74">&#39;_ab_cdc_updated_at&#39;</span>)) <span style="color:#66d9ef">AS</span> updated_at
    <span style="color:#66d9ef">FROM</span> 
        <span style="color:#66d9ef">source</span>
)

<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span>
<span style="color:#66d9ef">from</span> ods_imdb_actors
</code></pre></div><p><strong>ä½¿ç”¨dbtå°†odså±‚æ•°æ®è½¬æ¢ä¸ºdwdç»´åº¦æ¨¡å‹</strong></p>
<p>åˆ›å»ºdwd_imdb_actors_movies.sqlæ¨¡å‹ï¼Œå°†actorsã€moviesã€directorsç­‰odså±‚viewè½¬æ¢ä¸ºdwdå±‚çš„æ¼”å‘˜å‚æ¼”ç”µå½±æ˜ç»†è¡¨dwd_imdb_actors_moviesã€‚è¿™é‡Œä½¿ç”¨dbtæä¾›çš„incremental materializationsæ–¹å¼ï¼Œæ”¯æŒå¢é‡æ‰§è¡Œï¼Œå°†è‡ªä¸Šæ¬¡æ‰§è¡Œä»¥æ¥çš„è®°å½•æ’å…¥æˆ–æ›´æ–°åˆ°è¡¨ä¸­ï¼Œé¿å…æ¯æ¬¡éƒ½é‡å¤æ„é€ å®ä½“è¡¨ã€‚åœ¨æ¨¡å‹ä¸­ä½¿ç”¨incremental materializationsæ–¹å¼ï¼Œéœ€è¦æä¾›æ·»åŠ ï¼š</p>
<ul>
<li>unique_key: ç¡®ä¿å®ä½“åŒ–è¡¨ä¸­æ²¡æœ‰é‡å¤çš„è¡Œã€‚</li>
<li>incremental filter: dbté€šè¿‡è¯¥è¿‡æ»¤æ–¹å¼æ¥è¯†åˆ«å¢é‡è¿è¡Œä¸­å“ªäº›è¡Œå‘ç”Ÿäº†æ›´æ”¹ã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#960050;background-color:#1e0010">{{</span> config(engine<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MergeTree()&#39;</span>, materialized<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;incremental&#39;</span>, unique_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>) <span style="color:#960050;background-color:#1e0010">}}</span>

<span style="color:#66d9ef">with</span> dwd_imdb_actors_movies <span style="color:#66d9ef">as</span> (
     <span style="color:#66d9ef">SELECT</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id  <span style="color:#66d9ef">as</span> id,
                concat(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.first_name, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.last_name)  <span style="color:#66d9ef">as</span> actor_name,
                <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id <span style="color:#66d9ef">as</span> movie_id,
                <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.name <span style="color:#66d9ef">as</span> movie_name,
                <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.rank <span style="color:#66d9ef">as</span> movie_rank,
                <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_genres&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.genre <span style="color:#66d9ef">as</span> movie_genre,
                concat(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.first_name, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.last_name) <span style="color:#66d9ef">as</span> director_name,
                <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.updated_at <span style="color:#66d9ef">as</span> updated_at 
         <span style="color:#66d9ef">FROM</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>
                  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_roles&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_roles&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.actor_id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_actors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id
                  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_roles&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_id
                  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_genres&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_genres&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id
                  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id
                  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;ods_imdb_movies_directors&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.director_id

)

<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> dwd_imdb_actors_movies

<span style="color:#960050;background-color:#1e0010">{</span><span style="color:#f92672">%</span> <span style="color:#66d9ef">if</span> is_incremental() <span style="color:#f92672">%</span><span style="color:#960050;background-color:#1e0010">}</span>

<span style="color:#75715e">-- this filter will only be applied on an incremental run
</span><span style="color:#75715e"></span><span style="color:#66d9ef">where</span> id <span style="color:#f92672">&gt;</span> (<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">max</span>(id) <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">{{</span> this <span style="color:#960050;background-color:#1e0010">}}</span>) <span style="color:#66d9ef">or</span> updated_at <span style="color:#f92672">&gt;</span> (<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">max</span>(updated_at) <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">{{</span>this<span style="color:#960050;background-color:#1e0010">}}</span>)

<span style="color:#960050;background-color:#1e0010">{</span><span style="color:#f92672">%</span> endif <span style="color:#f92672">%</span><span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><p><strong>ä½¿ç”¨dbtå°†dwdç»´åº¦æ¨¡å‹è½¬æ¢ä¸ºdwsç»´åº¦æ¨¡å‹</strong></p>
<p>åˆ›å»ºdws_imdb_actors_movies.sqlæ¨¡å‹ï¼Œåœ¨dwd_imdb_actors_moviesç»´åº¦æ¨¡å‹ä¸Šè¿›è¡Œåˆ†æï¼Œå¾—å‡ºæ¼”å‘˜çš„æ‘˜è¦ä¿¡æ¯è¡¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#960050;background-color:#1e0010">{{</span> config(materialized<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;view&#39;</span>) <span style="color:#960050;background-color:#1e0010">}}</span>

<span style="color:#66d9ef">with</span> dws_imdb_actors_movies <span style="color:#66d9ef">as</span> (
    <span style="color:#66d9ef">SELECT</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id,
        <span style="color:#66d9ef">any</span>(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.actor_name)          <span style="color:#66d9ef">as</span> name,
        uniqExact(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_name)    <span style="color:#66d9ef">as</span> num_movies,
        <span style="color:#66d9ef">avg</span>(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_rank)          <span style="color:#66d9ef">as</span> avg_rank,
        uniqExact(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.movie_genre)   <span style="color:#66d9ef">as</span> unique_genres,
        uniqExact(<span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.director_name) <span style="color:#66d9ef">as</span> uniq_directors
    <span style="color:#66d9ef">FROM</span> 
        <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>
        <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#66d9ef">ref</span>(<span style="color:#e6db74">&#39;dwd_imdb_actors_movies&#39;</span>)<span style="color:#960050;background-color:#1e0010">}}</span>.id
)

<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span>
<span style="color:#66d9ef">from</span> dws_imdb_actors_movies
</code></pre></div><p><strong>è¿è¡Œdbtè¿›è¡Œæ•°æ®è½¬æ¢</strong></p>
<ul>
<li>åœ¨data_centeré¡¹ç›®ä¸‹æ‰§è¡Œ<code>dbt run</code>è¿›è¡Œæ•°æ®è½¬æ¢ã€‚
dbtä¼šæ ¹æ®modelsç›®å½•ä¸‹å®šä¹‰çš„æ¨¡å‹åœ¨ ç›®æ ‡æ•°æ®ä»“åº“ä¸­è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œåˆ›å»ºå¯¹åº”çš„viewã€tableã€‚</li>
</ul>
<pre><code>â¯ dbt run
03:39:49  Running with dbt=1.8.2
03:39:49  Registered adapter: clickhouse=1.8.0
03:39:49  [WARNING]: Configuration paths exist in your dbt_project.yml file which do not apply to any resources.
There are 1 unused configuration paths:
- models.data_center.imdb
03:39:50  Found 8 models, 7 sources, 441 macros
03:39:50  
03:39:50  Concurrency: 1 threads (target='dev')
03:39:50  
03:39:50  1 of 8 START sql view model `data_center`.`ods_imdb_actors` .................... [RUN]
03:39:50  1 of 8 OK created sql view model `data_center`.`ods_imdb_actors` ............... [OK in 0.13s]
03:39:50  2 of 8 START sql view model `data_center`.`ods_imdb_directors` ................. [RUN]
03:39:50  2 of 8 OK created sql view model `data_center`.`ods_imdb_directors` ............ [OK in 0.06s]
03:39:50  3 of 8 START sql view model `data_center`.`ods_imdb_movies` .................... [RUN]
03:39:50  3 of 8 OK created sql view model `data_center`.`ods_imdb_movies` ............... [OK in 0.06s]
03:39:50  4 of 8 START sql view model `data_center`.`ods_imdb_movies_directors` .......... [RUN]
03:39:50  4 of 8 OK created sql view model `data_center`.`ods_imdb_movies_directors` ..... [OK in 0.06s]
03:39:50  5 of 8 START sql view model `data_center`.`ods_imdb_movies_genres` ............. [RUN]
03:39:50  5 of 8 OK created sql view model `data_center`.`ods_imdb_movies_genres` ........ [OK in 0.06s]
03:39:50  6 of 8 START sql view model `data_center`.`ods_imdb_roles` ..................... [RUN]
03:39:50  6 of 8 OK created sql view model `data_center`.`ods_imdb_roles` ................ [OK in 0.06s]
03:39:50  7 of 8 START sql incremental model `data_center`.`dwd_imdb_actors_movies` ...... [RUN]
03:39:51  7 of 8 OK created sql incremental model `data_center`.`dwd_imdb_actors_movies` . [OK in 0.26s]
03:39:51  8 of 8 START sql view model `data_center`.`dws_imdb_actors_movies` ............. [RUN]
03:39:51  8 of 8 OK created sql view model `data_center`.`dws_imdb_actors_movies` ........ [OK in 0.07s]
03:39:51  
03:39:51  Finished running 7 view models, 1 incremental model in 0 hours 0 minutes and 0.99 seconds (0.99s).
03:39:51  
03:39:51  Completed successfully
03:39:51  
03:39:51  Done. PASS=8 WARN=0 ERROR=0 SKIP=0 TOTAL=8
</code></pre><ul>
<li>é€šè¿‡<code>dbt docs generate</code>å‘½ä»¤ç”Ÿæˆæ¨¡å‹æ–‡æ¡£ä¿¡æ¯</li>
<li>é€šè¿‡<code>dbt docs serve</code>è¿è¡Œdbt docsæœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°modelsçš„Lineage Graph

<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/1e7859712dd0c8aaf1c8198d6f2f0fd3_MD5.jpeg">
    <img src="/attachment/1e7859712dd0c8aaf1c8198d6f2f0fd3_MD5.jpeg" alt=""  />
    </a>
</div></li>
</ul>
<h3 id="åŸºäºdagsterè¿›è¡Œä»»åŠ¡ç¼–æ’">åŸºäºDagsterè¿›è¡Œä»»åŠ¡ç¼–æ’</h3>
<p><a href="https://github.com/dagster-io/dagster">Dagster</a>æ˜¯ä¸€ä¸ªå¼€æºæ•°æ®ç¼–æ’å™¨ï¼Œä¸“é—¨ç”¨äºå¼€å‘å’Œç»´æŠ¤æ•°æ®èµ„äº§ï¼ˆä¾‹å¦‚è¡¨ã€æ•°æ®é›†ã€æœºå™¨å­¦ä¹ æ¨¡å‹å’ŒæŠ¥è¡¨ï¼‰ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä»¥æ­£ç¡®çš„é¡ºåºè‡ªåŠ¨è¿è¡Œæ•°æ®ç®¡é“ä¸­çš„æ•°æ®é›†æˆã€æ•°æ®è½¬æ¢æ­¥éª¤ï¼Œç¡®ä¿æ•°æ®èµ„äº§çš„å‡†ç¡®æ€§ã€‚</p>
<p>Dagsterå¯ä»¥å¾ˆå¥½åœ°æ•´åˆairbyteä¸dbtï¼Œå¯¹æ•°æ®é›†æˆä¸æ•°æ®è½¬æ¢ä»»åŠ¡è¿›è¡Œç¼–æ’ã€è§‚æµ‹ã€è¯Šæ–­ã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<ul>
<li>
<p>Asset ï¼ˆèµ„äº§ï¼‰
èµ„äº§æ˜¯Dagsterçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¯ä»¥æ˜¯æ•°æ®åº“è¡¨æˆ–è€…è§†å›¾ã€å¯¹è±¡å­˜å‚¨ä¸­çš„æ–‡ä»¶ã€æœºå™¨å­¦ä¹ æ¨¡å‹ã€æ•°æ®é›†æˆæˆ–è€…æ•°æ®è½¬æ¢ç®¡é“ç­‰æŒä¹…æ€§å­˜å‚¨ä¸­çš„å¯¹è±¡ã€‚é€šè¿‡<code>@asset</code>è£…é¥°å™¨åˆ›å»ºAsset Definitionsï¼Œå¹¶ç»´æŠ¤å®ƒä»¬é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li>
<p>Jobs (ä»»åŠ¡)
Jobsæ˜¯Dagsterä¸­æ‰§è¡Œå’Œç›‘æ§Asset Definitionsçš„ä¸»è¦å•å…ƒï¼Œä»¥ä¸€ç³»åˆ—Assertä¸ºç›®æ ‡ï¼Œå¯ä»¥åœ¨Dagster UIæ‰‹åŠ¨è§¦å‘ã€è°ƒåº¦ä»»åŠ¡è§¦å‘ã€GraphQL APIè§¦å‘ã€‚</p>
</li>
<li>
<p>Automationï¼ˆè‡ªåŠ¨åŒ–ï¼‰
Dagster æä¾›äº†å¤šç§è‡ªåŠ¨åŒ–è¿è¡Œæ•°æ®ç®¡é“çš„æ–¹æ³•ï¼Œå¦‚è°ƒåº¦ä»»åŠ¡(schedules)ã€äº‹ä»¶è§¦å‘å™¨(event-based triggers)ã€‚</p>
</li>
<li>
<p>Resourcesï¼ˆèµ„æºï¼‰
åœ¨æ•°æ®å·¥ç¨‹ä¸­ï¼ŒResourcesæ˜¯ç”¨äºå®Œæˆå·¥ä½œçš„å¤–éƒ¨æœåŠ¡ã€å·¥å…·å’Œå­˜å‚¨ã€‚å¦‚ETLç®¡é“ä¸­ä½¿ç”¨çš„è·å–æ•°æ®çš„APIã€æ•°æ®ä»“åº“ã€BIå·¥å…·&hellip;ã€‚å¯ä»¥åœ¨Defintionså®šä¹‰ä¸­å…³è”Resourcesï¼Œä½œä¸ºAssetçš„å‚æ•°æ¥æŒ‡å®šResourcesä¸Assetçš„ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li>
<p>Opsï¼ˆè®¡ç®—ï¼‰
Opsæ˜¯Dagsterä¸­çš„æ ¸å¿ƒè®¡ç®—å•å…ƒï¼Œå•ä¸ªOpsåº”æ‰§è¡Œç›¸å¯¹ç®€å•çš„ä»»åŠ¡ï¼ˆæ•°æ®é›†æˆã€æ•°æ®æŸ¥è¯¢ã€æ•°æ®è½¬æ¢ã€æ•°æ®å­˜å‚¨&hellip;ï¼‰, æ”¯æŒå¯¹å¤šä¸ªOpsè¿›è¡Œæ•°æ®ç¼–æ’æ‰§è¡Œã€‚</p>
</li>
<li>
<p>Code locations (ä»£ç å®šä½)
DefinitionsåŒ…å«ä»£ç å®šä½ä¸­å®šä¹‰çš„æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬assetã€jobã€resourceã€scheduleå’Œsensorsã€‚</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">defs <span style="color:#f92672">=</span> Definitions(
    assets<span style="color:#f92672">=</span>[dbt_customers_asset, dbt_orders_asset],
    schedules<span style="color:#f92672">=</span>[bi_weekly_schedule],
    sensors<span style="color:#f92672">=</span>[new_data_sensor],
    resources<span style="color:#f92672">=</span>[dbt_resource],
)
</code></pre></div><p><strong>å®‰è£…Dagsterå¹¶åˆå§‹åŒ–é¡¹ç›®</strong></p>
<pre><code>pip install dagster dagster-airbyte dagster-dbt dagster-webserver

# ä½¿ç”¨dagster-dbtåˆ›å»ºæ¨¡æ¿é¡¹ç›®ï¼ŒæŒ‡å®šdbté¡¹ç›®ç›®å½•
dagster-dbt project scaffold --project-name orchestration_data_center --dbt-project-dir ./dbt_data_center --use-experimental-dbt-project

# åˆå§‹åŒ–åé¡¹ç›®ç»“æ„å¦‚ä¸‹
â”œâ”€â”€ orchestration_data_center
â”‚   â”œâ”€â”€ assets.py
â”‚   â”œâ”€â”€ definitions.py
â”‚   â”œâ”€â”€ project.py
â”‚   â””â”€â”€ schedules.py
â”œâ”€â”€ pyproject.toml
â””â”€â”€ setup.py
</code></pre><p><strong>Dagsteré›†æˆAirbyteã€dbt</strong></p>
<p>åˆå§‹åŒ–å®Œé¡¹ç›®åï¼Œåœ¨<code>assets.py</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é›†æˆAirbyteä¸dbtï¼Œå°†Airbyteçš„connectionä¸dbtçš„modelåŠ è½½ä¸ºDagsterçš„assetã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os
<span style="color:#f92672">from</span> dagster <span style="color:#f92672">import</span> AssetExecutionContext, EnvVar
<span style="color:#f92672">from</span> dagster_dbt <span style="color:#f92672">import</span> DbtCliResource, dbt_assets
<span style="color:#f92672">from</span> dagster_airbyte <span style="color:#f92672">import</span> AirbyteResource, load_assets_from_airbyte_instance
<span style="color:#f92672">from</span> .project <span style="color:#f92672">import</span> dbt_data_center_project


airbyte_instance <span style="color:#f92672">=</span> AirbyteResource(
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;your airbyte host&#34;</span>,
    port<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;8000&#34;</span>,
    <span style="color:#75715e"># If using basic auth, include username and password:</span>
    <span style="color:#75715e"># username=&#34;airbyte&#34;,</span>
    <span style="color:#75715e"># password=os.getenv(&#34;AIRBYTE_PASSWORD&#34;)</span>
)

imdb_airbyte_assets <span style="color:#f92672">=</span> load_assets_from_airbyte_instance(
    airbyte_instance,
    connection_filter<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> meta: <span style="color:#e6db74">&#34;imdb_to_data_center&#34;</span> <span style="color:#f92672">in</span> meta<span style="color:#f92672">.</span>name,)

<span style="color:#a6e22e">@dbt_assets</span>(manifest<span style="color:#f92672">=</span>dbt_data_center_project<span style="color:#f92672">.</span>manifest_path,select<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;tag:dbt_imdb&#39;</span>)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">imdb_dbt_assets</span>(context: AssetExecutionContext, dbt: DbtCliResource):
    <span style="color:#66d9ef">yield</span> <span style="color:#f92672">from</span> dbt.cli([<span style="color:#e6db74">&#34;build&#34;</span>], context<span style="color:#f92672">=</span>context)<span style="color:#f92672">.</span>stream()
</code></pre></div><p><strong>æ•°æ®ç¼–æ’</strong></p>
<p>Dagsterä¸­å®ç°æ•°æ®ç¼–æ’ï¼Œå³æ˜¯å¯¹assetä¾èµ–å…³ç³»çš„ç¡®å®šï¼Œdbté¡¹ç›®ä¸­å¯¹airbyteé›†æˆçš„åŸå§‹æ•°æ®ä¾èµ–ï¼Œå¯ä»¥é€šè¿‡ä¸Šæ–‡æè¿°çš„ï¼Œåœ¨dbt schema.ymlæ–‡ä»¶ä¸­ï¼Œé€šè¿‡meta-dagster-asset_keyå®šä¹‰sourceçš„upstream assetã€‚è€Œdbtä¸­å„æ¨¡å‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒDagsterä¼šè‡ªåŠ¨ä»dbté¡¹ç›®çš„Lineage Graphä¸­è·å–ã€‚</p>
<p><strong>å®šä¹‰ELT pipeline ç›¸å…³çš„Jobã€Scheduleã€Definitions</strong></p>
<p>åœ¨<code>schedules.py</code>æ–‡ä»¶ä¸­ï¼Œå®šä¹‰jobä¸schedulesï¼Œæè¿°ä»»åŠ¡æ‰§è¡Œçš„å…³è”assetä¸è°ƒåº¦æ–¹å¼ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> dagster <span style="color:#f92672">import</span> define_asset_job, ScheduleDefinition, Definitions

run_all_asset_job <span style="color:#f92672">=</span> define_asset_job(<span style="color:#e6db74">&#34;run_all_asset&#34;</span>, selection<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*&#34;</span>)

schedules_every_half_hour <span style="color:#f92672">=</span> [
    ScheduleDefinition(
        job<span style="color:#f92672">=</span>run_all_asset_job,
        cron_schedule<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*/30 * * * *&#34;</span>,  
    )
]
</code></pre></div><p>åœ¨<code>definitions.py</code>æ–‡ä»¶ä¸­ï¼Œå®šä¹‰Definitions,æè¿°ETL pipelineå…³è”çš„assetã€schedulesã€resourcesã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> dagster <span style="color:#f92672">import</span> Definitions
<span style="color:#f92672">from</span> dagster_dbt <span style="color:#f92672">import</span> DbtCliResource

<span style="color:#f92672">from</span> .assets <span style="color:#f92672">import</span> imdb_dbt_assets,imdb_airbyte_assets
<span style="color:#f92672">from</span> .project <span style="color:#f92672">import</span> dbt_data_center_project
<span style="color:#f92672">from</span> .schedules <span style="color:#f92672">import</span> schedules_every_half_hour

imdb_etl_defs <span style="color:#f92672">=</span> Definitions(
    assets<span style="color:#f92672">=</span>[imdb_airbyte_assets,imdb_dbt_assets],
    schedules<span style="color:#f92672">=</span>schedules_every_half_hour,
    resources<span style="color:#f92672">=</span>{
        <span style="color:#e6db74">&#34;dbt&#34;</span>: DbtCliResource(project_dir<span style="color:#f92672">=</span>dbt_data_center_project),
    },
)
</code></pre></div><p><strong>è¿è¡Œdagster webserver</strong></p>
<pre><code>dagster-webserver -h 0.0.0.0 -p 3000
</code></pre><p>åœ¨Dagster UIä¸ŠDeploymentä¸Šå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å®šä¹‰Definitions<code>orchestration_data_center</code>,å…³è”çš„ETL pipeline è°ƒåº¦ä»»åŠ¡ä¼šæ¯30åˆ†æ‰§è¡Œä¸€æ¬¡ï¼Œæ ¹æ®æ—¢å®šçš„ä¾èµ–å…³ç³»ï¼Œå…ˆè°ƒç”¨Airbyteè¿›è¡Œæ•°æ®é›†æˆï¼Œç„¶åä½¿ç”¨dbtè¿›è¡Œæ•°æ®è½¬æ¢ï¼Œæœ€ç»ˆå®Œæˆç»´åº¦æ¨¡å‹çš„åˆ›å»ºä¸æ›´æ–°ã€‚</p>
<p>
<div class="post-img-view">
    <a data-fancybox="gallery" data-src="/attachment/e0b60d855af8479e77017d250cce9966_MD5.jpeg">
    <img src="/attachment/e0b60d855af8479e77017d250cce9966_MD5.jpeg" alt=""  />
    </a>
</div></p>
<h3 id="åŸºäºmetabaseå®ç°biåˆ†æ">åŸºäºMetabaseå®ç°BIåˆ†æ</h3>
<p>ä½¿ç”¨Metabaseè¿æ¥åˆ°æˆ‘ä»¬çš„æ•°æ®ä»“åº“ï¼Œåœ¨ä½¿ç”¨Airbyteï¼Œdbtï¼ŒDagsterå®Œæˆæ•°æ®é›†æˆï¼Œæ•°æ®è½¬æ¢ï¼Œæ•°æ®ç¼–æ’ä¸è‡ªåŠ¨åŒ–pipelineæ‰§è¡Œæ“ä½œåï¼Œå°±å¯ä»¥è½»æ¾åœ°åœ¨Metabaseä¸­ä½¿ç”¨è½¬æ¢å¥½çš„ç»´åº¦æ¨¡å‹è¿›è¡ŒBIåˆ†æä¸å±•ç¤ºã€‚</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>åŸºäºdbtã€Airbyteã€Dagsterçš„ç°ä»£æ•°æ®æ ˆä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®é›†æˆã€æ•°æ®è½¬æ¢ã€ä»»åŠ¡ç¼–æ’ï¼›æ¨¡æ¿åŒ–çš„æ¨¡å‹æ„å»ºå¯ä»¥æ›´å¥½åœ°è¿›è¡Œä»£ç æ§åˆ¶ï¼ŒæŒç»­é›†æˆå’Œéƒ¨ç½²ï¼Œæ›´å¥½è¿›è¡ŒDataOpså®æ–½ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li><a href="https://www.getdbt.com/blog/future-of-the-modern-data-stack">https://www.getdbt.com/blog/future-of-the-modern-data-stack</a></li>
<li><a href="https://preset.io/blog/reshaping-data-engineering/">https://preset.io/blog/reshaping-data-engineering/</a></li>
<li><a href="https://preset.io/blog/modern-data-stack/">https://preset.io/blog/modern-data-stack/</a></li>
<li><a href="https://docs.airbyte.com/">https://docs.airbyte.com/</a></li>
<li><a href="https://docs.getdbt.com/docs/introduction">https://docs.getdbt.com/docs/introduction</a></li>
<li><a href="https://docs.dagster.io/getting-started">https://docs.dagster.io/getting-started</a></li>
</ul>
        </p>
    </div>
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ç°ä»£æ•°æ®æ ˆçš„å‘å±•">ç°ä»£æ•°æ®æ ˆçš„å‘å±•</a>
          <ul>
            <li><a href="#è¿‡å»ç°åœ¨ä¸æœªæ¥">è¿‡å»ã€ç°åœ¨ä¸æœªæ¥</a></li>
            <li><a href="#ä¿ƒæˆç°ä»£æ•°æ®æ ˆå¹¿æ³›é‡‡ç”¨çš„æŠ€æœ¯å‘å±•">ä¿ƒæˆç°ä»£æ•°æ®æ ˆå¹¿æ³›é‡‡ç”¨çš„æŠ€æœ¯å‘å±•</a></li>
          </ul>
        </li>
        <li><a href="#ä½¿ç”¨ç°ä»£æ•°æ®æ ˆæ¥é‡å¡‘æ•°æ®å·¥ç¨‹">ä½¿ç”¨ç°ä»£æ•°æ®æ ˆæ¥é‡å¡‘æ•°æ®å·¥ç¨‹</a>
          <ul>
            <li><a href="#ç°ä»£æ•°æ®æ ˆçš„å‘å±•è¶‹åŠ¿å¯¹æ•°æ®å·¥ç¨‹çš„å½±å“">ç°ä»£æ•°æ®æ ˆçš„å‘å±•è¶‹åŠ¿å¯¹æ•°æ®å·¥ç¨‹çš„å½±å“</a></li>
            <li><a href="#ç°ä»£æ•°æ®æ ˆç»„æˆéƒ¨åˆ†">ç°ä»£æ•°æ®æ ˆç»„æˆéƒ¨åˆ†</a></li>
          </ul>
        </li>
        <li><a href="#åŸºäºdbtairbytedagsterçš„å¼€æºç°ä»£æ•°æ®æ ˆå®è·µ">åŸºäºdbtã€Airbyteã€Dagsterçš„å¼€æºç°ä»£æ•°æ®æ ˆå®è·µ</a>
          <ul>
            <li><a href="#ç›®æ ‡">ç›®æ ‡</a></li>
            <li><a href="#æ•°æ®æµ">æ•°æ®æµ</a></li>
            <li><a href="#æ•°æ®ä»“åº“-clickhouse">æ•°æ®ä»“åº“-ClickHouse</a></li>
            <li><a href="#åŸºäºairbyteè¿›è¡Œæ•°æ®é›†æˆ">åŸºäºAirbyteè¿›è¡Œæ•°æ®é›†æˆ</a></li>
            <li><a href="#åŸºäºdbtè¿›è¡Œæ•°æ®è½¬æ¢">åŸºäºdbtè¿›è¡Œæ•°æ®è½¬æ¢</a></li>
            <li><a href="#åŸºäºdagsterè¿›è¡Œä»»åŠ¡ç¼–æ’">åŸºäºDagsterè¿›è¡Œä»»åŠ¡ç¼–æ’</a></li>
            <li><a href="#åŸºäºmetabaseå®ç°biåˆ†æ">åŸºäºMetabaseå®ç°BIåˆ†æ</a></li>
            <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
          </ul>
        </li>
        <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    <span>&copy; 2025 hanrong.li</span>
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
