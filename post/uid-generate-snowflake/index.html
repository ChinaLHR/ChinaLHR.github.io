<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>åŸºäºSnowFlakeçš„åˆ†å¸ƒå¼UIDç”ŸæˆæœåŠ¡</title>
    <meta name="description" content="keep curious ğŸ˜¼">
    <meta name="keywords" content='blog, chinalhr, lhr, åˆ†å¸ƒå¼UID, ç®—æ³•'>

    <meta property="og:url" content="https://chinalhr.github.io/post/uid-generate-snowflake/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="åŸºäºSnowFlakeçš„åˆ†å¸ƒå¼UIDç”ŸæˆæœåŠ¡">
    <meta property="og:description" content="keep curious ğŸ˜¼">
    <meta property="og:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="åŸºäºSnowFlakeçš„åˆ†å¸ƒå¼UIDç”ŸæˆæœåŠ¡">
    <meta name="twitter:description" content="keep curious ğŸ˜¼">
    <meta property="twitter:domain" content="https://chinalhr.github.io/post/uid-generate-snowflake/">
    <meta property="twitter:url" content="https://chinalhr.github.io/post/uid-generate-snowflake/">
    <meta name="twitter:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    
    <link rel="canonical" href="https://chinalhr.github.io/post/uid-generate-snowflake/" />

    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://chinalhr.github.io//css/dark.css">

    <script src="https://chinalhr.github.io//js/svg-injector.min.js"></script>
    <script src="https://chinalhr.github.io//js/feather-icons.min.js"></script>
    <script src="https://chinalhr.github.io//js/main.js"></script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JLJBQBW5WM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JLJBQBW5WM');
</script>
  
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://chinalhr.github.io/">
                <img src="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://chinalhr.github.io/">LHR</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/"><span data-feather='home'></span> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/post/"><span data-feather='book'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/projects/"><span data-feather='code'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/about/"><span data-feather='user'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/chinalhr"><span data-feather='github'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/index.xml"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/"><span data-feather='home'></span> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/post/"><span data-feather='book'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/projects/"><span data-feather='code'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/about/"><span data-feather='user'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/chinalhr"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/index.xml"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>åŸºäºSnowFlakeçš„åˆ†å¸ƒå¼UIDç”ŸæˆæœåŠ¡</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            September 8, 2018
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://chinalhr.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8Fuid">åˆ†å¸ƒå¼UID</a></li>
        
            <li class="post-tag"><a href="https://chinalhr.github.io/tags/%E7%AE%97%E6%B3%95">ç®—æ³•</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <blockquote>
<p>åˆ†æä¸æ”¹é€ SnowFlakeç®—æ³•</p>
</blockquote>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>å…¬å¸åŸæœ¬è®¢å•IDçš„ç”Ÿæˆæ˜¯åŸºäºJava Randomä¸Hashç®—æ³•çš„å•æœºUIDç”Ÿæˆç­–ç•¥ï¼Œä½†æ˜¯åç«¯ç³»ç»Ÿçš„ç”Ÿæˆç¯å¢ƒæ˜¯åŸºäºSLBï¼ŒNginxä¸Javaå¤šè¿›ç¨‹çš„åˆ†å¸ƒå¼ç¯å¢ƒï¼Œå¯¼è‡´å‡ºç°äº†UID ç¢°æ’,äº§ç”Ÿçº¿ä¸Šé—®é¢˜ã€‚ç°å‡†å¤‡åŸºäºTwitterçš„SnowFlakeï¼Œå°†UIDç”Ÿæˆç‹¬ç«‹å‡ºæ¥åšä¸€ä¸ªç»Ÿä¸€çš„å…¨å±€IDç”ŸæˆæœåŠ¡ã€‚</p>
<h2 id="snowflakeæ¦‚è¿°">SnowFlakeæ¦‚è¿°</h2>
<p>SnowFlakeç®—æ³•ç”¨æ¥ç”Ÿæˆ64ä½çš„IDï¼Œåˆšå¥½å¯ä»¥ç”¨longæ•´å‹å­˜å‚¨ï¼Œèƒ½å¤Ÿç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿäº§å”¯ä¸€çš„IDï¼Œ å¹¶ä¸”ç”Ÿæˆçš„IDæœ‰å¤§è‡´çš„é¡ºåºã€‚ ç”Ÿæˆçš„64ä½IDå¯ä»¥åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼š</p>
<pre><code>0 - 41ä½æ—¶é—´æˆ³ - 5ä½æ•°æ®ä¸­å¿ƒæ ‡è¯† - 5ä½æœºå™¨æ ‡è¯† - 12ä½åºåˆ—å·
</code></pre>
<p>5ä½æ•°æ®ä¸­å¿ƒæ ‡è¯†è·Ÿ5ä½æœºå™¨æ ‡è¯†è¿™æ ·çš„åˆ†é…ä»…ä»…æ˜¯å½“å‰å®ç°ä¸­åˆ†é…çš„ï¼Œå¯ä»¥æŒ‰å…¶å®ƒçš„åˆ†é…æ¯”ä¾‹åˆ†é…ï¼Œå¦‚10ä½æœºå™¨æ ‡è¯†ï¼Œä¸éœ€è¦æ•°æ®ä¸­å¿ƒæ ‡è¯†&hellip;</p>
<ul>
<li>1ä½æ ‡è¯†éƒ¨åˆ†ï¼Œåœ¨javaä¸­ç”±äºlongçš„æœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œæ­£æ•°æ˜¯0ï¼Œè´Ÿæ•°æ˜¯1ï¼Œä¸€èˆ¬ç”Ÿæˆçš„IDä¸ºæ­£æ•°ï¼Œæ‰€ä»¥ä¸º0</li>
<li>41ä½æ—¶é—´æˆ³éƒ¨åˆ†ï¼Œè¿™ä¸ªæ˜¯æ¯«ç§’çº§çš„æ—¶é—´ï¼Œä¸€èˆ¬å®ç°ä¸Šä¸ä¼šå­˜å‚¨å½“å‰çš„æ—¶é—´æˆ³ï¼Œè€Œæ˜¯æ—¶é—´æˆ³çš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´-å›ºå®šçš„å¼€å§‹æ—¶é—´ï¼‰ï¼Œè¿™æ ·å¯ä»¥ä½¿äº§ç”Ÿçš„IDä»æ›´å°å€¼å¼€å§‹ï¼›41ä½çš„æ—¶é—´æˆ³å¯ä»¥ä½¿ç”¨69å¹´ï¼Œ41ä½å¯ä»¥è¡¨ç¤º241âˆ’1ä¸ªæ¯«ç§’çš„å€¼ï¼Œè½¬åŒ–æˆå•ä½å¹´åˆ™æ˜¯(241âˆ’1)/(1000âˆ—60âˆ—60âˆ—24âˆ—365)=69å¹´</li>
<li>10ä½èŠ‚ç‚¹éƒ¨åˆ†ï¼ŒTwitterå®ç°ä¸­ä½¿ç”¨å‰5ä½ä½œä¸ºæ•°æ®ä¸­å¿ƒæ ‡è¯†ï¼Œå5ä½ä½œä¸ºæœºå™¨æ ‡è¯†ï¼Œå¯ä»¥éƒ¨ç½²1024ä¸ªèŠ‚ç‚¹(5ä½å¯æ”¯æŒ2^5 = 0~31æ•´å‹,32*32=1024èŠ‚ç‚¹)ï¼›</li>
<li>12ä½åºåˆ—å·éƒ¨åˆ†ï¼Œæ”¯æŒåŒä¸€æ¯«ç§’å†…åŒä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç”Ÿæˆ4096ä¸ªID(2^12=4096)ï¼›</li>
</ul>
<h2 id="ç®€å•å®ç°">ç®€å•å®ç°</h2>
<h3 id="ç»“æ„">ç»“æ„</h3>
<pre><code>0 - 41ä½æ—¶é—´æˆ³ - 10ä½æœºå™¨æ ‡è¯† - 12ä½åºåˆ—å·
</code></pre>
<h3 id="é›†ç¾¤ç¯å¢ƒä¸‹æœºå™¨æ ‡è¯†è·å–">é›†ç¾¤ç¯å¢ƒä¸‹æœºå™¨æ ‡è¯†è·å–</h3>
<ol>
<li>
<p>IPåä¸‰ä½</p>
<p>å¯åŠ¨ç³»ç»Ÿçš„æ—¶å€™è·å–IPåœ°å€(æˆ–è€…æˆªå–IPåä¸‰ä½)ä½œä¸ºæœºå™¨æ ‡è¯†(0~255)ã€‚ç¼ºé™·ï¼šä¼šæµªè´¹256~1024ä½çš„æœºå™¨æ ‡è¯†</p>
</li>
<li>
<p>Redis Set</p>
<p>â‘ åœ¨æœåŠ¡å¯åŠ¨æ—¶é€šè¿‡Redis setnx &lt;key:æœºå™¨æ ‡è¯† value:ipåœ°å€&gt;,for 1024å¯¹æœºå™¨æ ‡è¯†è¿›è¡Œè·å–ï¼Œå¦‚æœKeyä¸å­˜åœ¨åˆ™è®¾ç½®å½“å‰IPåœ°å€ï¼Œå¹¶ä½¿ç”¨keyä½œä¸ºå½“å‰æœåŠ¡çš„æœºå™¨æ ‡è¯†ã€‚</p>
<p>â‘¡åœ¨æœåŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨ScheduleThreadPoolæˆ–è€…DeamonThreadä¸ºå½“å‰æœåŠ¡çš„Redis Keyç»­æ—¶,é¿å…å…¶ä»–æœåŠ¡è·å–åˆ°ç›¸åŒçš„æœºå™¨æ ‡è¯†</p>
</li>
</ol>
<h3 id="å…¶ä»–">å…¶ä»–</h3>
<pre><code>1. æœåŠ¡é‰´æƒ|IPç™½åå•
2. æœåŠ¡é™æµ
</code></pre>
<h3 id="ä»£ç ">ä»£ç </h3>
<ul>
<li>Java å®ç°</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * @Author : lhr
</span><span style="color:#75715e"> * @Date : 12:03 2018/9/14
</span><span style="color:#75715e"> * &lt;p&gt;
</span><span style="color:#75715e"> * åŸºäºTwitter SnowFlakeç®—æ³• UIDç”Ÿæˆç±»
</span><span style="color:#75715e"> * 0 - 41ä½æ—¶é—´æˆ³ - 10ä½æœºå™¨æ ‡è¯† - 12ä½åºåˆ—å·
</span><span style="color:#75715e"> * 41ä½æ—¶é—´æˆ³ï¼šæ—¶é—´æˆ³çš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´-å›ºå®šçš„å¼€å§‹æ—¶é—´START_STMPï¼‰
</span><span style="color:#75715e"> * 10ä½æœºå™¨æ ‡è¯†:å›ºå®šå€¼,å–IPåœ°å€åå…«ä½
</span><span style="color:#75715e"> * 12ä½åºåˆ—å·ï¼šåŒä¸€æ¯«ç§’å†…åŒä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç”Ÿæˆ4096ä¸ªID
</span><span style="color:#75715e"> * &lt;p&gt;
</span><span style="color:#75715e"> * 0 - 000000000 0000000000 0000000000 0000000000 0 - 000000000 - 0000000000 00
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SnowFlakeUidGenerate</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * èµ·å§‹æ—¶é—´æˆ³ 2018-09-10 00:00:00
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> START_STMP <span style="color:#f92672">=</span> 1536508800000L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ReentrantLock reentrantLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„ä½æ•°
</span><span style="color:#75715e">     * SEQUENCE_BIT:åºåˆ—å·å ç”¨çš„ä½æ•°
</span><span style="color:#75715e">     * MACHINE_BIT:æœºå™¨æ ‡è¯†å ç”¨çš„ä½æ•°(0-1024)
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> SEQUENCE_BIT <span style="color:#f92672">=</span> 12<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MACHINE_BIT <span style="color:#f92672">=</span> 10<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„æœ€å¤§å€¼
</span><span style="color:#75715e">     * MAX_SEQUENCE_NUM:åºåˆ—å·æœ€å¤§å€¼
</span><span style="color:#75715e">     * MAX_MACHINE_NUM:æœºå™¨æ ‡è¯†æœ€å¤§å€¼
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MAX_SEQUENCE_NUM <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L <span style="color:#f92672">^</span> <span style="color:#f92672">(-</span>1L <span style="color:#f92672">&lt;&lt;</span> SEQUENCE_BIT<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MAX_MACHINE_NUM <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L <span style="color:#f92672">^</span> <span style="color:#f92672">(-</span>1L <span style="color:#f92672">&lt;&lt;</span> MACHINE_BIT<span style="color:#f92672">);</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å‘å·¦ç§»åŠ¨
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MACHINE_LEFT <span style="color:#f92672">=</span> SEQUENCE_BIT<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> TIMESTMP_LEFT <span style="color:#f92672">=</span> SEQUENCE_BIT <span style="color:#f92672">+</span> MACHINE_BIT<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> machineId <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> sequence <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> lastStmp <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * äº§ç”Ÿä¸‹ä¸€ä¸ªId
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">nextId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        reentrantLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lock</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">long</span> currStmp <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currStmp <span style="color:#f92672">&lt;</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                String msg <span style="color:#f92672">=</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;SnowFlakeUidGenerate: æœºå™¨æ—¶é’Ÿå‘ç”Ÿé”™è¯¯,æ— æ³•ç”ŸæˆUID &#34;</span> <span style="color:#f92672">+</span>
                        <span style="color:#e6db74">&#34;machineId:{} ; currStmp:{} ; lastStmp:{}&#34;</span><span style="color:#f92672">,</span> machineId<span style="color:#f92672">,</span> currStmp<span style="color:#f92672">,</span> lastStmp<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span>msg<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currStmp <span style="color:#f92672">==</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">//ç›¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·è‡ªå¢
</span><span style="color:#75715e"></span>                sequence <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>sequence <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;</span> MAX_SEQUENCE_NUM<span style="color:#f92672">;</span>
                <span style="color:#75715e">//åŒä¸€æ¯«ç§’çš„åºåˆ—æ•°å·²ç»è¾¾åˆ°æœ€å¤§
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sequence <span style="color:#f92672">==</span> 0L<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    currStmp <span style="color:#f92672">=</span> getNextMill<span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">//ä¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·ç½®ä¸º0
</span><span style="color:#75715e"></span>                sequence <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            lastStmp <span style="color:#f92672">=</span> currStmp<span style="color:#f92672">;</span>

            <span style="color:#66d9ef">return</span> <span style="color:#f92672">((</span>currStmp <span style="color:#f92672">-</span> START_STMP<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;&lt;</span> TIMESTMP_LEFT<span style="color:#f92672">)</span>
                    <span style="color:#f92672">|</span> machineId <span style="color:#f92672">&lt;&lt;</span> MACHINE_LEFT
                    <span style="color:#f92672">|</span> sequence<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            reentrantLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getNextMill</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">long</span> mill <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>mill <span style="color:#f92672">&lt;=</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            mill <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> mill<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getNewstmp</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initMachineId</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> currentMachineId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currentMachineId <span style="color:#f92672">&gt;</span> MAX_MACHINE_NUM <span style="color:#f92672">||</span> currentMachineId <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            String msg <span style="color:#f92672">=</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;SnowFlakeUidGenerate æœºå™¨æ ‡è¯†ä¸æ­£ç¡® machineId:{}&#34;</span><span style="color:#f92672">,</span> machineId<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span>msg<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        machineId <span style="color:#f92672">=</span> currentMachineId<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getMachineId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> machineId<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>æ ¸å¿ƒæ“ä½œ</li>
</ul>
<pre><code>((currStmp - START_STMP) &lt;&lt; TIMESTMP_LEFT)
ä½¿ç”¨å½“å‰æ—¶é—´æˆ³å‡å»å¼€å§‹æ—¶é—´æˆ³å¾—åˆ°æ—¶é—´æˆ³æ•°å€¼,æ—¶é—´æˆ³æ•°å€¼å·¦ç§»22ä½è¿›è¡Œbitä½å¯¹é½
0 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00]00 0000 0000 0000 0000 0000

| machineId &lt;&lt; MACHINE_LEFT
10ä½çš„æœºå™¨IDå·¦ç§»12ä½è¿›è¡Œbitä½å¯¹å…¶,å¹¶äºä¸Šè¿°äºŒè¿›åˆ¶æ•°å€¼è¿›è¡Œ|æˆ–æ“ä½œ,è¿›è¡Œbitä½å¯¹é½
0 000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00 [00 0000 0000] 0000 0000 0000
|
0 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00]00 0000 0000 0000 0000 0000
=
0 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00][00 0000 0000] 0000 0000 0000

| sequence
12ä½çš„åºåˆ—å·ä¸ä¸Šè¿°äºŒè¿›åˆ¶æ•°å€¼è¿›è¡Œ|æˆ–æ“ä½œ,è¿›è¡Œbitä½å¯¹é½ å¾—åˆ°
0 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00][00 0000 0000][0000 0000 0000]
</code></pre><h2 id="snowflakeæ”¹é€ ">SnowFlakeæ”¹é€ </h2>
<h3 id="å›ºå®šé•¿åº¦uidæ”¹é€ ">å›ºå®šé•¿åº¦UIDæ”¹é€ </h3>
<p>Snowflakeç”Ÿæˆçš„IDé•¿åº¦ä¸æ˜¯å›ºå®šçš„ï¼Œå’Œè®¾ç½®çš„èµ·å§‹æ—¶é—´æœ‰å…³ç³»ã€‚å¤šæ•°è®¢å•å·éœ€è¦ä¸€ä¸ªç»Ÿä¸€é•¿åº¦çš„è®¢å•IDã€‚å¯ä»¥åœ¨64ä½æ•°å‰é¢ä½¿ç”¨01è¾¾åˆ°ç¡®å®šä½æ•°ï¼Œå¯¹æœºå™¨IDä¸åºåˆ—å·è¿›è¡Œå–èˆã€‚(å¯¹äºæœºæˆ¿å°çš„å°å‹å…¬å¸å¯ä»¥é‡‡ç”¨ç¼©å‡æœºå™¨IDçš„æ–¹å¼ï¼Œå¯¹äºå¹¶å‘æ€§ä¸é«˜çš„ä¸šåŠ¡å¯ä»¥é‡‡ç”¨ç¼©å‡åºåˆ—å·çš„æ–¹å¼ï¼Œå‡å°æ¯«ç§’çº§åˆ«UIDçš„ç”Ÿæˆæ•°é‡)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * @Author : lhr
</span><span style="color:#75715e"> * @Date : 14:06 2019/7/30
</span><span style="color:#75715e"> * &lt;p&gt;
</span><span style="color:#75715e"> * åŸºäºTwitter SnowFlakeç®—æ³•æ”¹é€  UserIdç”Ÿæˆç±» ç”Ÿæˆå›ºå®šé•¿åº¦ä¸º19çš„ID
</span><span style="color:#75715e"> * 01 - 41ä½æ—¶é—´æˆ³ - 10ä½æœºå™¨æ ‡è¯† - 11ä½åºåˆ—å·
</span><span style="color:#75715e"> * 41ä½æ—¶é—´æˆ³ï¼šæ—¶é—´æˆ³çš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´-å›ºå®šçš„å¼€å§‹æ—¶é—´START_STMPï¼‰
</span><span style="color:#75715e"> * 10ä½æœºå™¨æ ‡è¯†:å›ºå®šå€¼,å–IPåœ°å€åå…«ä½
</span><span style="color:#75715e"> * 11ä½åºåˆ—å·ï¼šåŒä¸€æ¯«ç§’å†…åŒä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç”Ÿæˆ2048ä¸ªID
</span><span style="color:#75715e"> * &lt;p&gt;
</span><span style="color:#75715e"> * 01 - 000000000 0000000000 0000000000 0000000000 0 - 000000000 - 0000000000 0
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SnowFlakeUserIdGenerate</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * èµ·å§‹æ—¶é—´æˆ³ 2018-09-10 00:00:00
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> START_STMP <span style="color:#f92672">=</span> 1536508800000L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ReentrantLock reentrantLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æœ‰æ•ˆbitä½
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> bitNum <span style="color:#f92672">=</span> 62<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„ä½æ•°
</span><span style="color:#75715e">     * SEQUENCE_BIT:åºåˆ—å·å ç”¨çš„ä½æ•°
</span><span style="color:#75715e">     * MACHINE_BIT:æœºå™¨æ ‡è¯†å ç”¨çš„ä½æ•°(0-1024)
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> SEQUENCE_BIT <span style="color:#f92672">=</span> 11<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MACHINE_BIT <span style="color:#f92672">=</span> 10<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„æœ€å¤§å€¼
</span><span style="color:#75715e">     * MAX_SEQUENCE_NUM:åºåˆ—å·æœ€å¤§å€¼
</span><span style="color:#75715e">     * MAX_MACHINE_NUM:æœºå™¨æ ‡è¯†æœ€å¤§å€¼
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MAX_SEQUENCE_NUM <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L <span style="color:#f92672">^</span> <span style="color:#f92672">(-</span>1L <span style="color:#f92672">&lt;&lt;</span> SEQUENCE_BIT<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MAX_MACHINE_NUM <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L <span style="color:#f92672">^</span> <span style="color:#f92672">(-</span>1L <span style="color:#f92672">&lt;&lt;</span> MACHINE_BIT<span style="color:#f92672">);</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * æ¯ä¸€éƒ¨åˆ†å‘å·¦ç§»åŠ¨
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> MACHINE_LEFT <span style="color:#f92672">=</span> SEQUENCE_BIT<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> TIMESTMP_LEFT <span style="color:#f92672">=</span> SEQUENCE_BIT <span style="color:#f92672">+</span> MACHINE_BIT<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> machineId <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> sequence <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> lastStmp <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1L<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * äº§ç”Ÿä¸‹ä¸€ä¸ªId
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">nextId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        reentrantLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lock</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">long</span> currStmp <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currStmp <span style="color:#f92672">&lt;</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                String msg <span style="color:#f92672">=</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;SnowFlakeUserIdGenerate: æœºå™¨æ—¶é’Ÿå‘ç”Ÿé”™è¯¯,æ— æ³•ç”ŸæˆUID &#34;</span> <span style="color:#f92672">+</span>
                        <span style="color:#e6db74">&#34;machineId:{} ; currStmp:{} ; lastStmp:{}&#34;</span><span style="color:#f92672">,</span> machineId<span style="color:#f92672">,</span> currStmp<span style="color:#f92672">,</span> lastStmp<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span>msg<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currStmp <span style="color:#f92672">==</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">//ç›¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·è‡ªå¢
</span><span style="color:#75715e"></span>                sequence <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>sequence <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;</span> MAX_SEQUENCE_NUM<span style="color:#f92672">;</span>
                <span style="color:#75715e">//åŒä¸€æ¯«ç§’çš„åºåˆ—æ•°å·²ç»è¾¾åˆ°æœ€å¤§
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sequence <span style="color:#f92672">==</span> 0L<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    currStmp <span style="color:#f92672">=</span> getNextMill<span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">//ä¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·ç½®ä¸º0
</span><span style="color:#75715e"></span>                sequence <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            lastStmp <span style="color:#f92672">=</span> currStmp<span style="color:#f92672">;</span>

            <span style="color:#66d9ef">return</span> <span style="color:#f92672">((</span>currStmp <span style="color:#f92672">-</span> START_STMP<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;&lt;</span> TIMESTMP_LEFT<span style="color:#f92672">)</span>
                    <span style="color:#f92672">|</span> machineId <span style="color:#f92672">&lt;&lt;</span> MACHINE_LEFT
                    <span style="color:#f92672">|</span> sequence
                    <span style="color:#f92672">|</span> 1L <span style="color:#f92672">&lt;&lt;</span> bitNum<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            reentrantLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getNextMill</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">long</span> mill <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>mill <span style="color:#f92672">&lt;=</span> lastStmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            mill <span style="color:#f92672">=</span> getNewstmp<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> mill<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getNewstmp</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initMachineId</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> currentMachineId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currentMachineId <span style="color:#f92672">&gt;</span> MAX_MACHINE_NUM <span style="color:#f92672">||</span> currentMachineId <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            String msg <span style="color:#f92672">=</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;SnowFlakeUserIdGenerate æœºå™¨æ ‡è¯†ä¸æ­£ç¡® machineId:{}&#34;</span><span style="color:#f92672">,</span> machineId<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span>msg<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        machineId <span style="color:#f92672">=</span> currentMachineId<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getMachineId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> machineId<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>æ ¸å¿ƒæ“ä½œ</li>
</ul>
<pre><code>| 1L &lt;&lt; bitNum;
1å·¦ç§»62ä¸ªæœ‰æ•ˆbitä½ï¼Œå¹¶ä¸åŸæ¥ç”Ÿæˆçš„uidè¿›è¡Œ|æˆ–æ“ä½œ,ä½¿å¾—ç”Ÿæˆçš„UID bitä½1å’Œ2ä¸º01ï¼Œè¾¾åˆ°ç¡®å®šç”Ÿæˆåè¿›åˆ¶æ•°ä¸º19ä½çš„ç›®çš„
00 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00][00 0000 0000][0000 0000 000]
|
01 000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00 00 0000 0000 0000 0000 000
=
01 [000 0000 0000 0000 0000 0000 0000 0000 0000 0000 00][00 0000 0000][0000 0000 000]
</code></pre><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li><a href="http://www.wolfbe.com/detail/201701/386.html">http://www.wolfbe.com/detail/201701/386.html</a></li>
<li><a href="http://www.wolfbe.com/detail/201611/381.html">http://www.wolfbe.com/detail/201611/381.html</a></li>
<li><a href="https://segmentfault.com/a/1190000011282426">https://segmentfault.com/a/1190000011282426</a></li>
</ul>
        </p>
    </div>
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#èƒŒæ™¯">èƒŒæ™¯</a></li>
        <li><a href="#snowflakeæ¦‚è¿°">SnowFlakeæ¦‚è¿°</a></li>
        <li><a href="#ç®€å•å®ç°">ç®€å•å®ç°</a>
          <ul>
            <li><a href="#ç»“æ„">ç»“æ„</a></li>
            <li><a href="#é›†ç¾¤ç¯å¢ƒä¸‹æœºå™¨æ ‡è¯†è·å–">é›†ç¾¤ç¯å¢ƒä¸‹æœºå™¨æ ‡è¯†è·å–</a></li>
            <li><a href="#å…¶ä»–">å…¶ä»–</a></li>
            <li><a href="#ä»£ç ">ä»£ç </a></li>
          </ul>
        </li>
        <li><a href="#snowflakeæ”¹é€ ">SnowFlakeæ”¹é€ </a>
          <ul>
            <li><a href="#å›ºå®šé•¿åº¦uidæ”¹é€ ">å›ºå®šé•¿åº¦UIDæ”¹é€ </a></li>
          </ul>
        </li>
        <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    <span>&copy; 2022 hanrong.li</span>
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
