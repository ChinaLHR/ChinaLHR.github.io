<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>KotlinåŸºç¡€ï¼šå‡½æ•°ã€å¯¹è±¡ã€Lamdba</title>
    <meta name="description" content="keep curious ğŸ˜¼">
    <meta name="keywords" content='blog, chinalhr, lhr, Kotlin'>

    <meta property="og:url" content="https://chinalhr.github.io/post/kotlin-learn01/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="KotlinåŸºç¡€ï¼šå‡½æ•°ã€å¯¹è±¡ã€Lamdba">
    <meta property="og:description" content="keep curious ğŸ˜¼">
    <meta property="og:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KotlinåŸºç¡€ï¼šå‡½æ•°ã€å¯¹è±¡ã€Lamdba">
    <meta name="twitter:description" content="keep curious ğŸ˜¼">
    <meta property="twitter:domain" content="https://chinalhr.github.io/post/kotlin-learn01/">
    <meta property="twitter:url" content="https://chinalhr.github.io/post/kotlin-learn01/">
    <meta name="twitter:image" content="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg">

    
    <link rel="canonical" href="https://chinalhr.github.io/post/kotlin-learn01/" />

    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://chinalhr.github.io//css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://chinalhr.github.io//css/dark.css">

    <script src="https://chinalhr.github.io//js/svg-injector.min.js"></script>
    <script src="https://chinalhr.github.io//js/feather-icons.min.js"></script>
    <script src="https://chinalhr.github.io//js/main.js"></script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JLJBQBW5WM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JLJBQBW5WM');
</script>
  
    
    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://chinalhr.github.io/">
                <img src="https://user-images.githubusercontent.com/19829495/188320707-5b468cc9-bea4-486c-b591-57ff8324e41c.jpg" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://chinalhr.github.io/">LHR</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/"><span data-feather='home'></span> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/post/"><span data-feather='book'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/projects/"><span data-feather='code'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/about/"><span data-feather='user'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/chinalhr"><span data-feather='github'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://chinalhr.github.io/index.xml"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/"><span data-feather='home'></span> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/post/"><span data-feather='book'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/projects/"><span data-feather='code'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/about/"><span data-feather='user'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/chinalhr"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://chinalhr.github.io/index.xml"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>KotlinåŸºç¡€ï¼šå‡½æ•°ã€å¯¹è±¡ã€Lamdba</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            January 13, 2019
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://chinalhr.github.io/tags/kotlin">Kotlin</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <blockquote>
<p>Kotlinå­¦ä¹ è®°å½•</p>
</blockquote>
<h3 id="kotlinçš„ç”Ÿæ€">Kotlinçš„ç”Ÿæ€</h3>
<ul>
<li>Androidå¼€å‘</li>
<li>æœåŠ¡ç«¯å¼€å‘</li>
<li>å‰ç«¯å¼€å‘</li>
<li>åŸç”Ÿç¯å¢ƒå¼€å‘</li>
</ul>
<h3 id="è®¾è®¡å“²å­¦">è®¾è®¡å“²å­¦</h3>
<ul>
<li>
<p>é™æ€ç±»å‹ä¸ç±»å‹æ¨å¯¼
æ‰€æœ‰è¡¨è¾¾å¼çš„ç±»å‹åœ¨ç¼–è¯‘æœŸå·²ç»ç¡®å®šäº†ï¼Œè€Œç¼–è¯‘å™¨å°±èƒ½éªŒè¯å¯¹è±¡æ˜¯å¦åŒ…å«äº†ä½ æƒ³è®¿é—®çš„æ–¹æ³•æˆ–è€…å®‡æ®µã€‚
ä¸Javaç›¸æ¯”(JDK8â†“)ï¼Œæ‹¥æœ‰å‹æ¨å¯¼ï¼Œä¸éœ€è¦ä½ åœ¨æºä»£ç ä¸­æ˜¾å¼åœ°å£°æ˜æ¯ä¸ªå˜é‡ï¼Œå˜é‡ç±»å‹å¯ ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¥è‡ªåŠ¨åˆ¤æ–­çš„ç±»å‹ã€‚</p>
</li>
<li>
<p>nullå®‰å…¨
Kotlin çš„ç±»å‹ç³»ç»Ÿè·Ÿè¸ªé‚£äº›å¯ä»¥æˆ–ä¸å¯ä»¥ä¸º null çš„
å€¼ï¼Œå¹¶ä¸”ç¦æ­¢é‚£äº›è¿è¡Œæ—¶å¯èƒ½å¯¼è‡´ NullPointerException çš„æ“ä½œã€‚(æŠŠç±»å‹æ ‡è®°ä¸ºå¯ç©ºçš„åªè¦åœ¨ç±»å‹å°¾éƒ¨å¢åŠ ä¸€ä¸ªå­—ç¬¦?)</p>
</li>
<li>
<p>äº’æ“ä½œæ€§
ä¸Javaï¼Œç°æˆåº“æ‹¥æœ‰æé«˜äº’æ“ä½œæ€§ï¼ŒKotlinçš„ç±»å’Œæ–¹æ³•å¯ä»¥åƒå¸¸è§„çš„Java ç±»å’Œæ–¹æ³•ä¸€æ ·è¢«è°ƒç”¨ã€‚(Kotlin æ²¡æœ‰è‡ªå·±çš„é›†åˆåº“ï¼Œå®ƒå®Œå…¨ä¾èµ– Java æ ‡å‡†åº“ä¸­çš„ç±»)</p>
</li>
<li>
<p>æ²¡æœ‰checked exception
è¦æ±‚checked exceptionå¯ä»¥æé«˜å¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡ï¼Œåˆå¯ä»¥æé«˜ä»£ç è´¨é‡ï¼Œä½†æ˜¯å¤§å‹è½¯ä»¶é¡¹ç›®çš„ç»éªŒè¡¨æ˜äº†ä¸åŒçš„ç»“æœ-checked exceptioné™ä½äº†ç”Ÿäº§åŠ›ï¼Œä»£ç è´¨é‡å¾ˆå°‘æˆ–æ ¹æœ¬æ²¡æœ‰å¢åŠ ã€‚</p>
</li>
</ul>
<p>å‚è€ƒï¼š<a href="https://kotlinlang.org/docs/reference/exceptions.html">https://kotlinlang.org/docs/reference/exceptions.html</a></p>
<ul>
<li>é¢å‘è¡¨è¾¾å¼ç¼–ç¨‹
Kotlinä¸­çš„æµç¨‹æ§åˆ¶ä¸ä»…æ˜¯æ™®é€šè¯­å¥ï¼Œå®ƒä»¬å¯ä»¥è¿”å›å€¼ï¼Œå¦‚ifè¡¨è¾¾å¼ã€whenè¡¨è¾¾å¼ã€tryè¡¨è¾¾å¼ç­‰ï¼Œè€Œä¸”è¿˜æœ‰èŒƒå›´è¡¨è¾¾å¼(1..100),ä¸­ç¼€è¡¨è¾¾å¼(a to b)ã€‚ä¸€åˆ‡çš†è¡¨è¾¾å¼çš„è®¾è®¡è®©å¼€å‘è€…åœ¨è®¾è®¡ä¸šåŠ¡æ—¶ï¼Œä¿ƒè¿›äº†é¿å…åˆ›é€ å‰¯ä½œç”¨çš„é€»è¾‘è®¾è®¡ï¼Œä»è€Œè®©ç¨‹åºå˜å¾—æ›´åŠ å®‰å…¨;è€Œä¸”è¡¨è¾¾å¼é€šå¸¸ä¹Ÿå…·æœ‰æ›´å¥½çš„è¡¨è¾¾èƒ½åŠ›ï¼Œå…¸å‹çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯è¡¨è¾¾å¼æ›´å®¹æ˜“è¿›è¡Œç»„åˆã€‚</li>
</ul>
<h3 id="kotlinä¸java">Kotlinä¸Java</h3>
<ul>
<li>å…³é”®å®‡ fun ç”¨æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°çš„ç±»å‹å†™åœ¨å®ƒ çš„åç§°åé¢</li>
<li>æ•°ç»„å°±æ˜¯ç±»,å’Œ Java ä¸åŒï¼Œ Kotlin æ²¡æœ‰å£°æ˜æ•°ç»„ç±»å‹çš„ç‰¹æ®Šè¯­æ³•</li>
<li>åœ¨ Kotlin ä¸­ï¼Œé™¤äº†å¾ªç¯ï¼ˆ for, do å’Œ do/whileï¼‰ä»¥å¤–å¤§å¤šæ•°æ§åˆ¶ç»“æ„( if,When )éƒ½æ˜¯è¡¨è¾¾å¼</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#960050;background-color:#1e0010">è¡¨è¾¾å¼ä¸è¯­å¥</span>:<span style="color:#960050;background-color:#1e0010">è¡¨è¾¾å¼æœ‰å€¼ï¼Œå¹¶ä¸”èƒ½ä½œä¸ºå¦ä¸€ä¸ªè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ï¼›è€Œè¯­å¥æ€»æ˜¯åŒ…å›´ç€å®ƒçš„ä»£ç å—ä¸­çš„é¡¶å±‚å…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„å€¼ã€‚</span>

<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">max</span>(a : Int , b: Int) = <span style="color:#66d9ef">if</span> (a &gt; b) a <span style="color:#66d9ef">else</span> b
</code></pre></div><ul>
<li>ä»¥å…³é”®å­—å¼€å§‹ï¼Œç„¶åæ˜¯å˜é‡åç§°ã€‚(var age:Int = 20)</li>
<li>val-ä¸å¯å˜å¼•ç”¨,var-å¯å˜å¼•ç”¨</li>
<li>å€¼å¯¹è±¡ç®€å•å£°æ˜ï¼šclass Person(val name: String)</li>
<li>å¤´ç­‰å±æ€§ï¼Œçœç•¥getter/setter</li>
<li>æ™ºèƒ½è½¬æ¢ï¼šä½¿ç”¨ is æ£€æŸ¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸç§ç±»å‹,Kotlinç¼–è¯‘å™¨æ£€æŸ¥è¿‡ä¸€ä¸ªå˜é‡æ˜¯æŸç§ç±»å‹ï¼Œåé¢å°±ä¸å†éœ€è¦è½¬æ¢å®ƒï¼Œå¯ä»¥å°±æŠŠå®ƒå½“ä½œä½ æ£€æŸ¥è¿‡çš„ç±»å‹ä½¿ç”¨ã€‚(å¯¹æ¯”Java instanceOf ä¹‹åéœ€è¦æ˜¾ç¤ºè½¬æ¢)</li>
<li>when:whenå¯¹æ¯”switchï¼šswitchåªèƒ½ä½¿ç”¨æšä¸¾å¸¸é‡ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ•°å­—å­—é¢å€¼;when å…è®¸ä½¿ç”¨ä»»ä½•å¯¹è±¡å¹¶ä¸”ä¸éœ€è¦åœ¨æ¯ä¸ªåˆ†æ”¯éƒ½å†™ä¸Šbreak è¯­å¥ã€‚whenæ˜¯è¡¨è¾¾å¼ä¸”å¯ä»¥ä¸ifè¿ç”¨&hellip;.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">//when
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">evalWhen</span>(e: Expr): Int =
<span style="color:#66d9ef">when</span> (e) {
    <span style="color:#66d9ef">is</span> Num -&gt;
        e.value <span style="color:#75715e">//æ™ºèƒ½è½¬æ¢
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">is</span> Sum -&gt;
        evalWhen(e.right) + evalWhen(e.left)
    <span style="color:#66d9ef">else</span> -&gt;
        <span style="color:#66d9ef">throw</span> RuntimeException(<span style="color:#e6db74">&#34;ç±»å‹é”™è¯¯&#34;</span>)
}
</code></pre></div><ul>
<li>
<p>for:Kotlinæ²¡æœ‰Javaçš„for-iæ¦‚å¿µï¼Œå¤šå‡ºæ¥åŒºé—´ä¸æ•°åˆ—</p>
<ul>
<li>åŒºé—´</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"> <span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">100</span>) {
     println(<span style="color:#e6db74">&#34;currentï¼š$i&#34;</span>)
 }
</code></pre></div><ul>
<li>downTo step until</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">//ä»100 åˆ° 1 æ‰“å°å¶æ•° æ­¥é•¿2 å‘ä¸‹åˆ°1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">100</span> downTo <span style="color:#ae81ff">1</span> step <span style="color:#ae81ff">2</span>) {
    println(<span style="color:#e6db74">&#34;currentï¼š$i&#34;</span>)
}
</code></pre></div></li>
<li>
<p>å¼‚å¸¸</p>
<p>Kotlin ä¸­ throw ç»“æ„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸å¿…ä½¿ç”¨ new å…³é”®å­—æ¥åˆ›å»ºå¼‚å¸¸å®ä¾‹ã€‚(tryä¹Ÿæ˜¯)
Kotlin å¹¶ä¸åŒºåˆ†å—æ£€å¼‚å¸¸å’Œæœªå—æ£€å¼‚å¸¸ã€‚ä¸ç”¨æŒ‡å®šå‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸ ï¼Œ è€Œä¸”å¯ä»¥å¤„ç†ä¹Ÿå¯ä»¥ä¸å¤„ç†å¼‚å¸¸ã€‚</p>
</li>
</ul>
<h3 id="å‡½æ•°">å‡½æ•°</h3>
<ul>
<li>å‘½åå‚æ•°
å½“è°ƒç”¨ä¸€ä¸ª Kotlinå®šä¹‰çš„å‡½æ•°æ—¶ï¼Œå¯ä»¥æ˜¾å¼åœ°æ ‡æ˜ä¸€äº›å‚æ•°çš„åç§°,é¿å…æ··æ·†</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">joinToString(collectio, separator =<span style="color:#e6db74">&#34;&#34;</span>, prefix =<span style="color:#e6db74">&#34;&#34;</span>, postfix =<span style="color:#e6db74">&#34;Â·&#34;</span>)
</code></pre></div><ul>
<li>é»˜è®¤å‚æ•°å€¼
å¯¹æ¯”Javaä¸€äº›ç±»çš„é‡è½½å‡½æ•°å¾ˆå¤šï¼Œ Kotlinä¸­å¯ä»¥åœ¨å£°æ˜å‡½æ•°çš„æ—¶å€™ï¼ŒæŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åˆ›å»ºé‡è½½çš„å‡½æ•°ã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">fun</span> &lt;T&gt; <span style="color:#a6e22e">joinToString</span>(
    collection: Collection&lt;T&gt;,
    separator: String =<span style="color:#e6db74">&#34;,&#34;</span>,<span style="color:#75715e">//é»˜è®¤å‚æ•°å€¼
</span><span style="color:#75715e"></span>    prefix: String =<span style="color:#e6db74">&#34;&#34;</span>,
    postfix: String = <span style="color:#e6db74">&#34;&#34;</span>
    ) : String{
            
}
</code></pre></div><ul>
<li>é¡¶å±‚å‡½æ•°|å‚æ•°
åœ¨Javaä¸­ï¼Œç±»å¤„äºé¡¶å±‚ï¼Œç±»åŒ…å«å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨Kotlinä¸­ï¼Œå‡½æ•°å¤„äºé¡¶å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‡½æ•°æ”¾åœ¨ä»£ç æ–‡ä»¶çš„é¡¶å±‚ï¼Œè®©å®ƒä¸ä»å±äºä»»ä½•ç±»ï¼Œä»»ä½•ç±»éƒ½å¯ä»¥è°ƒç”¨ã€‚
ç›®çš„ï¼Œæ¶ˆé™¤äº†Javaä¸­å¸¸è§çš„é™æ€å·¥å…·ç±»ï¼Œä½¿æˆ‘ä»¬çš„ä»£ç æ›´åŠ æ•´æ´ã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">@file:JvmName(<span style="color:#e6db74">&#34;StrUtil&#34;</span>)
<span style="color:#66d9ef">package</span> util

<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">joinToStr</span>(collection: Collection&lt;String&gt;): String{
    <span style="color:#75715e">//....
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>;
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">import</span> util.joinToStr

<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>(args: Array&lt;String&gt;){
    joinToStr(collection = listOf(<span style="color:#e6db74">&#34;123&#34;</span>, <span style="color:#e6db74">&#34;456&#34;</span>))
}
</code></pre></div><p>å› ä¸ºåœ¨Javaä¸­ï¼Œç±»è¿˜æ˜¯å¿…é¡»è¦å­˜åœ¨çš„ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°†Str.ktæ–‡ä»¶é‡Œçš„ä»£ç æ”¾åœ¨äº†ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„ç±»ä¸­ï¼Œç„¶åæŠŠæˆ‘ä»¬å®šä¹‰çš„Kotlinçš„å‡½æ•°ä½œä¸ºé™æ€æ–¹æ³•æ”¾åœ¨å…¶ä¸­ï¼Œåœ¨Javaä¸­æ˜¯å…ˆé€šè¿‡importå¯¼å…¥è¿™ä¸ªç±»ï¼Œç„¶åé€šè¿‡ç±»å.æ–¹æ³•åæ¥è°ƒç”¨ã€‚å¯ä»¥é€šè¿‡@file:JvmNameæ³¨è§£æ¥è‡ªå®šä¹‰ç±»åã€‚</p>
<ul>
<li>æ‰©å±•å‡½æ•°|å‚æ•°</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * æ‰©å±•å‡½æ•°
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> *  String-æ¥æ”¶è€…ç±»å‹           get(this.length -1) å¯¹æ¥æ”¶è€…å¯¹è±¡(å­—ç¬¦ä¸²)è¿›è¡Œæ“ä½œå¹¶è¿”å›
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">String</span>.lastChar() : Char = <span style="color:#66d9ef">get</span>(<span style="color:#66d9ef">this</span>.length -<span style="color:#ae81ff">1</span>)

<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>(args: Array&lt;String&gt;) {
    System.<span style="color:#66d9ef">out</span>.println(<span style="color:#e6db74">&#34;Kotlin&#34;</span>.lastChar())
}
</code></pre></div><p>å¯¼å…¥æ‰©å±•å‡½æ•°(Kotiin å…è®¸ç”¨å’Œå¯¼å…¥ç±»ä¸€æ ·çš„è¯­æ³•æ¥å¯¼å…¥)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">import</span> strings.lastChar
</code></pre></div><ul>
<li>to ä¸­ç¼€è°ƒç”¨
infix ä¿®é¥°ç¬¦æ ‡è¯†å¯ä»¥ä½¿ç”¨ä¸­ç¼€è°ƒç”¨ï¼Œto å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Pair ç±»å‹çš„å¯¹è±¡ç”¨æ¥è¡¨ç¤ºä¸€å¯¹å…ƒç´ (è§£æ„å£°æ˜)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">fun</span> &lt;K, V&gt; <span style="color:#a6e22e">mapOf</span>(<span style="color:#66d9ef">vararg</span> values: Pair&lt;K, V&gt;): Map&lt;K , V&gt;
<span style="color:#75715e">//ä½¿ç”¨
</span><span style="color:#75715e"></span>mapOf(<span style="color:#ae81ff">1</span> to <span style="color:#e6db74">&#34;One&#34;</span>,<span style="color:#ae81ff">2</span> to <span style="color:#e6db74">&#34;Two&#34;</span>)
</code></pre></div><h3 id="ç±»-å¯¹è±¡">ç±»-å¯¹è±¡</h3>
<p>Kotlin åœ¨ç±»ååé¢ä½¿ç”¨å†’å·æ¥ä»£æ›¿äº† Java ä¸­çš„ extends å’Œ implements å…³é”®å­—ã€‚</p>
<ul>
<li>Javaçš„ç±»å’Œæ–¹æ³•é»˜è®¤æ˜¯opençš„ï¼Œè€ŒKotlinä¸­é»˜è®¤éƒ½æ˜¯finalçš„ã€‚</li>
</ul>
<p>ç›®çš„ï¼šé¿å…è„†å¼±çš„åŸºç±»é—®é¢˜(ç±»è¢«é‡å†™æ–¹æ³•çš„é£é™©)ã€‚Kotliné‡‡ç”¨äº†openï¼Œfinal å’Œ abstract ä¿®é¥°ç¬¦</p>
<p>ç¼–è¯‘æœŸå¼ºåˆ¶ä½¿ç”¨overrideä¿®é¥°ç¬¦</p>
<table>
<thead>
<tr>
<th>ä¿®é¥°ç¬¦</th>
<th>ç›¸å…³æˆå‘˜</th>
<th>ä½¿ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>final</td>
<td>ä¸èƒ½è¢«é‡å†™</td>
<td>ç±»ä¸­æˆå‘˜é»˜è®¤ä½¿ç”¨</td>
</tr>
<tr>
<td>open</td>
<td>å¯ä»¥è¢«é‡å†™</td>
<td>éœ€è¦æ˜ç¡®åœ°è¡¨æ˜</td>
</tr>
<tr>
<td>abstract</td>
<td>å¿…é¡»è¢«é‡å†™</td>
<td>åªèƒ½åœ¨æŠ½è±¡ç±»ä¸­ä½¿ç”¨ï¼šæŠ½è±¡æˆå‘˜ä¸èƒ½æœ‰å®ç°</td>
</tr>
<tr>
<td>override</td>
<td>é‡å†™çˆ¶ç±»æˆ–æ¥å£ä¸­çš„æˆå‘˜</td>
<td>å¦‚æœæ²¡æœ‰ä½¿ç”¨ final è¡¨æ˜ï¼ŒäºŸå†™çš„æˆå‘˜é»˜è®¤æ˜¯å¼€æ”¾çš„</td>
</tr>
</tbody>
</table>
<ul>
<li>å¯è§æ€§ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º public ,æ¨¡å—ä¿®é¥°ç¬¦internal</li>
</ul>
<p>internalï¼šåªåœ¨æ¨¡å—å†…éƒ¨å¯è§ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ç»„ä¸€èµ·ç¼–è¯‘çš„ Kotiin æ–‡ä»¶(ä¸€ä¸ªMavenæˆ–Gradleé¡¹ç›®,IDEAæ¨¡å—&hellip;)</p>
<ul>
<li>Kotlinç¼–è¯‘å™¨ç”Ÿæˆ:æ•°æ®ç±»ï¼Œå§”æ‰˜ç±»</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">//é‡å†™toString,equals,hashCode
</span><span style="color:#75715e"></span><span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">toString</span>() = <span style="color:#e6db74">&#34;...&#34;</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e"> * æ•°æ®ç±»ï¼Œç¼–è¯‘å™¨é‡å†™toString ã€equals å’Œ hashCode ã€‚ 
</span><span style="color:#75715e"> * equals ç”¨æ¥æ¯”è¾ƒå®ä¾‹
</span><span style="color:#75715e"> * hashCode ç”¨æ¥ä½œä¸ºä¾‹å¦‚ HashMap è¿™ç§åŸºäºå“ˆå¸Œå®¹å™¨çš„é”®
</span><span style="color:#75715e"> * toString ç”¨æ¥ä¸ºç±»ç”ŸæˆæŒ‰å£°æ˜é¡ºåºæ’åˆ—çš„æ‰€æœ‰å­—æ®µçš„å­—ç¬¦ä¸²è¡¨è¾¾å½¢å¼
</span><span style="color:#75715e"> *  copy æ–¹æ³•ï¼š copyå¯¹è±¡çš„åŒæ—¶ä¿®æ”¹æŸäº›å±æ€§çš„å€¼
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span>(<span style="color:#66d9ef">val</span> name: String, <span style="color:#66d9ef">val</span> postalCode: Int)
<span style="color:#75715e">/**
</span><span style="color:#75715e"> * ç±»å§”æ‰˜ï¼šå¯ä»¥ä½¿ç”¨ by å…³é”®å­—å°†æ¥å£çš„å®ç°å§”æ‰˜åˆ°å¦ä¸€ä¸ªå¯¹è±¡(é¿å…è£…é¥°å™¨æ¨¡å¼å¸¦æ¥çš„é‡å¤æ¨¡æ¿ä»£ç )
</span><span style="color:#75715e"> *  
</span><span style="color:#75715e"> *ç±»ç›¸å½“äºinnerListçš„åŒ…è£…ç±»ï¼Œæ‹¥æœ‰innerListçš„å®ç°ï¼Œå¹¶å¯ä»¥è¦†ç›–åŸæœ‰æ–¹æ³•æä¾›ä¸åŒå®ç°
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DelegatingCollection</span>&lt;T&gt;(innerList: Collection&lt;T&gt; = ArrayList&lt;T&gt;()) : Collection&lt;T&gt; <span style="color:#66d9ef">by</span> innerList {}
</code></pre></div><ul>
<li>objectå…³é”®å­—ä¸ä¼´ç”Ÿå¯¹è±¡</li>
</ul>
<p>â€œä¼´ç”Ÿâ€æ˜¯ç›¸è¾ƒäºä¸€ä¸ªç±»è€Œè¨€çš„ï¼Œæ„ä¸ºä¼´éšæŸä¸ªç±»çš„å¯¹è±¡ï¼Œå®ƒå±äºè¿™ä¸ªç±»æ‰€æœ‰ï¼Œå› æ­¤ä¼´ç”Ÿå¯¹è±¡è·ŸJavaä¸­staticä¿®é¥°æ•ˆæœæ€§è´¨ä¸€æ ·ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ªå•ä¾‹ã€‚å®ƒéœ€è¦å£°æ˜åœ¨ç±»çš„å†…éƒ¨ï¼Œåœ¨ç±»è¢«è£…è½½æ—¶ä¼šè¢«åˆå§‹åŒ–ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * objectå…³é”®å­— å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹ç±»
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Payroll</span> {
 ...
 }
 
<span style="color:#75715e">/**
</span><span style="color:#75715e"> * ä¼´ç”Ÿå¯¹è±¡companionï¼šå·¥å‚æ–¹æ³•
</span><span style="color:#75715e"> */</span>
<span style="color:#75715e">//æ„é€ æ–¹æ³•ç§æœ‰åŒ–
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">constructor</span>(<span style="color:#66d9ef">val</span> nickname: String) {
    <span style="color:#75715e">//å£°æ˜ä¼´ç”Ÿå¯¹è±¡:å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> {
        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">newSubscribingUser</span>(email: String) =
                User(email.substringBefore(<span style="color:#e6db74">&#34;@&#34;</span>))

        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">newFacebookUser</span>(accountld: Int) =
                User(accountld.toString())
    }
}

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * æ™®é€šç±»çš„ä¼´ç”Ÿå¯¹è±¡ï¼šä¼´ç”Ÿå¯¹è±¡æ˜¯ä¸€ä¸ªå£°æ˜åœ¨ç±»ä¸­çš„æ™®é€šå¯¹è±¡ï¼Œæœ‰åå­—(é»˜è®¤Companion )ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªæ¥å£æˆ–è€…æœ‰æ‰©å±•å‡½æ•°æˆ–å±æ€§ ã€‚ ä¼´ç”Ÿå¯¹è±¡ï¼ˆä¸åŒ…çº§åˆ«å‡½æ•°å’Œå±æ€§ä¸€èµ·ï¼‰æ›¿ä»£äº† Java é™æ€æ–¹æ³•å’Œå­—æ®µå®šä¹‰
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Prize</span>(<span style="color:#66d9ef">val</span> name: String, <span style="color:#66d9ef">val</span> count: Int, <span style="color:#66d9ef">val</span> type: Int) {
	<span style="color:#66d9ef">companion</span> <span style="color:#66d9ef">object</span> {
		<span style="color:#66d9ef">val</span> TYPE_REDPACK = <span style="color:#ae81ff">0</span>
		<span style="color:#66d9ef">val</span> TYPE_COUPON = <span style="color:#ae81ff">1</span>
		<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">isRedpack</span>(prize: Prize): Boolean {
			<span style="color:#66d9ef">return</span> prize.type == TYPE_REDPACK
		}
    }
 }
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>(args: Array&lt;String&gt;) {
	<span style="color:#66d9ef">val</span> prize = Prize(<span style="color:#e6db74">&#34;çº¢åŒ…&#34;</span>, <span style="color:#ae81ff">10</span>, Prize.TYPE_REDPACK)
    print(Prize.isRedpack(prize))
}

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * å¯¹è±¡è¡¨è¾¾å¼ï¼š(åŒ¿åå†…éƒ¨ç±»)
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">val</span> Listener = <span style="color:#66d9ef">object</span> <span style="color:#960050;background-color:#1e0010">: </span><span style="color:#a6e22e">MouseAdapter</span>() {
<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">mouseClicked</span>(e: MouseEvent) { .. . }
<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">mouseEntered</span>(e: MouseEvent) { ... }
}
</code></pre></div><ul>
<li>å»¶è¿Ÿåˆå§‹åŒ–ï¼šby lazyä¸lateinit</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e">* by lazy : valå˜é‡çš„åˆå§‹åŒ–
</span><span style="color:#75715e">* lazyçš„èƒŒåæ˜¯æ¥å—ä¸€ä¸ªlambdaå¹¶è¿”å›ä¸€ä¸ªLazy &lt;T&gt;å®ä¾‹çš„å‡½æ•°ï¼Œç¬¬ä¸€æ¬¡è®¿é—®è¯¥å±æ€§æ—¶ï¼Œä¼šæ‰§è¡Œlazyå¯¹åº”çš„Lambdaè¡¨è¾¾å¼å¹¶è®°å½•* ç»“æœã€‚
</span><span style="color:#75715e">* lazyå±æ€§é»˜è®¤LazyThreadSafetyMode.SYNCHRON IZEDï¼ˆåŒæ­¥é”ï¼‰
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Bird</span>(<span style="color:#66d9ef">val</span> weight: Double, <span style="color:#66d9ef">val</span> age: Int, <span style="color:#66d9ef">val</span> color: String) {
    <span style="color:#66d9ef">val</span> sex: String <span style="color:#66d9ef">by</span> lazy {
         <span style="color:#66d9ef">if</span> (color == <span style="color:#e6db74">&#34;yellow&#34;</span>) <span style="color:#e6db74">&#34;male&#34;</span> <span style="color:#66d9ef">else</span> <span style="color:#e6db74">&#34;female&#34;</span>
	}
}

<span style="color:#75715e">/**
</span><span style="color:#75715e">* lateinit : varå˜é‡çš„åˆå§‹åŒ–
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">lateinit</span> <span style="color:#66d9ef">var</span> sex: String 
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">printSex</span>() {
     <span style="color:#66d9ef">this</span>.sex = <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.color == <span style="color:#e6db74">&#34;yellow&#34;</span>) <span style="color:#e6db74">&#34;male&#34;</span> <span style="color:#66d9ef">else</span> <span style="color:#e6db74">&#34;female&#34;</span>
}

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Delegates.notNull&lt;T&gt; ï¼šåŸºæœ¬æ•°æ®ç±»å‹å˜é‡åˆå§‹åŒ–
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">var</span> test <span style="color:#66d9ef">by</span> Delegates.notNull&lt;Int&gt;()
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">doSomething</span>() {
	test = <span style="color:#ae81ff">1</span>
}
</code></pre></div><h3 id="lamdba">Lamdba</h3>
<ul>
<li>Kotlinä¸Java LamdbaåŒºåˆ«
1.åœ¨Kotiinä¸­Lamdbaä¸ä¼šä»…é™äºè®¿é—® final å˜é‡ï¼Œåœ¨ lambda å†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™äº›å˜é‡(lambdaæ•æ‰)</li>
</ul>
<ol start="2">
<li>éƒ¨åˆ†æ“ä½œç¬¦å¢å¼ºï¼š[kotlin]count = [java]filter + count</li>
</ol>
<ul>
<li>æƒ°æ€§é›†åˆæ“ä½œSequence
ä¾‹å¦‚ map å’Œ filteræ“ä½œç¬¦ï¼Œæ¯ä¸€æ­¥çš„ä¸­é—´ç»“æœéƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶åˆ—è¡¨ï¼ŒSequenceå¯ä»¥é¿å…åˆ›å»ºè¿™äº›ä¸´æ—¶ä¸­é—´å¯¹è±¡(åºåˆ—ä¸­çš„å…ƒç´ æ±‚å€¼æ˜¯æƒ°æ€§çš„)ã€‚
æ³¨æ„ï¼š Sequence åªæä¾›äº† ä¸€ä¸ªæ–¹æ³•ï¼Œ iterator
å…³äºæƒ°æ€§æ±‚å€¼ï¼š1. æƒ°æ€§æ±‚å€¼æ˜¯é€ä¸ªå¤„ç†å…ƒç´  2. å»¶æœŸæ“ä½œï¼Œè°ƒç”¨æœ«ç«¯æ“ä½œ(countï¼Œsum&hellip;)çš„æ—¶å€™æ‰ä¼šæ±‚å€¼</li>
</ul>
<p>iterator ä¸ Sequence åŒºåˆ«:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * å¤„ç†åºåˆ—çš„ä¸­é—´æ“ä½œå‡½æ•°æ˜¯ä¸è¿›è¡Œä»»ä½•è®¡ç®—çš„ã€‚ç›¸åï¼Œå®ƒä»¬ä¼šè¿”å›ä¸Šä¸€ä¸ªä¸­é—´æ“ä½œå¤„ç†åäº§ç”Ÿçš„æ–°åºåˆ—ã€‚
</span><span style="color:#75715e"> * æ‰€æœ‰è¿™äº›ä¸€ç³»åˆ—ä¸­é—´è®¡ç®—éƒ½å°†åœ¨ç»ˆç«¯æ“ä½œæ‰§è¡Œä¸­è¢«ç¡®å®šï¼Œä¾‹å¦‚å¸¸è§çš„ç»ˆç«¯æ“ä½œtoListæˆ–count.åœ¨å¦ä¸€æ–¹é¢ï¼Œå¤„ç†Iterableçš„æ¯ä¸ªä¸­é—´æ“ä½œå‡½æ•°éƒ½æ˜¯ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é›†åˆã€‚
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Iterable</span>&lt;<span style="color:#66d9ef">out</span> T&gt; {
    <span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">iterator</span>(): Iterator&lt;T&gt;
}
<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Sequence</span>&lt;<span style="color:#66d9ef">out</span> T&gt; {
    <span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">iterator</span>(): Iterator&lt;T&gt;
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">//æƒ°æ€§æ±‚å€¼ï¼Œé¿å…åˆ›å»ºä¸´æ—¶ä¸­é—´å¯¹è±¡
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">val</span> list = persons.asSequence()
            .map(Person<span style="color:#f92672">::</span>name)
            .filter { it.startsWith(<span style="color:#e6db74">&#34;l&#34;</span>) }
            .toList()
<span style="color:#75715e">//æƒ°æ€§æ±‚å€¼ï¼šç»™å®šåºåˆ—ä¸­ çš„å‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®¡ç®—å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> naturalNumbers = generateSequence(<span style="color:#ae81ff">0</span>) { it + <span style="color:#ae81ff">1</span> }
println(<span style="color:#e6db74">&#34;æ±‚100 ä»¥å†…çš„å’Œï¼š${naturalNumbers.takeWhile { it &lt;= 100 }.sum()}&#34;</span>)
</code></pre></div><ul>
<li>with å’Œ apply</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * ä½¿ç”¨ç»™å®šçš„[receiver]ä½œä¸ºæ¥æ”¶å™¨è°ƒç”¨æŒ‡å®šçš„å‡½æ•°[block]å¹¶è¿”å›å…¶ç»“æœã€‚
</span><span style="color:#75715e"> */</span>
@kotlin.<span style="color:#66d9ef">internal</span>.InlineOnly
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">fun</span> &lt;T, R&gt; <span style="color:#a6e22e">with</span>(receiver: T, block: T.() -&gt; R): R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    <span style="color:#66d9ef">return</span> receiver.block()
}

<span style="color:#66d9ef">val</span> returnAToZ = with(StringBuilder()) {
        <span style="color:#66d9ef">for</span> (letter <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#39;A&#39;</span>..<span style="color:#e6db74">&#39;Z&#39;</span>) {
            append(letter)
        }
        toString()
}

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * ä½¿ç”¨`this`å€¼ä½œä¸ºæ¥æ”¶å™¨è°ƒç”¨æŒ‡å®šçš„å‡½æ•°[block]å¹¶è¿”å›`this`å€¼ã€‚
</span><span style="color:#75715e"> */</span>
@kotlin.<span style="color:#66d9ef">internal</span>.InlineOnly
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">fun</span> &lt;T&gt; <span style="color:#a6e22e">T</span>.apply(block: T.() -&gt; Unit): T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block()
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
}

<span style="color:#66d9ef">val</span> returnAToZ = StringBuilder().apply {
        <span style="color:#66d9ef">for</span> (letter <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#39;A&#39;</span>..<span style="color:#e6db74">&#39;Z&#39;</span>) {
            append(letter)
        }
}
</code></pre></div><h3 id="é«˜é˜¶lamdba">é«˜é˜¶Lamdba</h3>
<ul>
<li>é«˜é˜¶å‡½æ•°</li>
</ul>
<p>ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºç»“æœ</p>
<pre><code>        fun foo(x: Int): (Int) -&gt; Int {
            return { y: Int -&gt; x + y }
        }
</code></pre><p>æ‰§è¡Œfooå‡½æ•°ä¹‹åï¼Œä¼šè¿”å›å¦ä¸€ä¸ªç±»å‹ä¸º(Int)-&gt; Intçš„å‡½æ•°</p>
<ul>
<li>æŸ¯é‡ŒåŒ–(Currying)</li>
</ul>
<p>æŸ¯é‡ŒåŒ–æŒ‡çš„æ˜¯æŠŠæ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆä¸€ç³»åˆ—ä»…æ¥æ”¶å•ä¸€å‚æ•°å‡½æ•°çš„è¿‡ç¨‹ï¼Œåœ¨è¿”å›æœ€ç»ˆç»“æœå€¼ä¹‹å‰ï¼Œå‰é¢çš„å‡½æ•°ä¾æ¬¡æ¥æ”¶å•ä¸ªå‚æ•°ï¼Œç„¶åè¿”å›ä¸‹ä¸€ä¸ªæ–°çš„å‡½æ•°;æŸ¯é‡ŒåŒ–æ˜¯ä¸ºäº†ç®€åŒ–Lambdaæ¼”ç®—ç†è®ºä¸­å‡½æ•°æ¥æ”¶å¤šå‚æ•°è€Œå‡ºç°çš„ï¼Œå®ƒç®€åŒ–äº†ç†è®ºï¼Œå°†å¤šå…ƒå‡½æ•°å˜æˆäº†ä¸€å…ƒ;</p>
<pre><code>        fun sum(x: Int) = { y: Int -&gt;
            { z: Int -&gt; x + y + z }
        }
        sum(1)(2)(3)
</code></pre><p>åœ¨kotlinä¸­ï¼Œå¦‚æœå‚æ•°ä¸æ­¢ä¸€ä¸ªï¼Œä¸”æœ€åä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°ç±»å‹æ—¶ï¼Œå°±å¯ä»¥é‡‡ç”¨ç±»ä¼¼æŸ¯é‡ŒåŒ–é£æ ¼çš„è°ƒç”¨</p>
<pre><code>        fun curryingLike(content: String, block: (String) -&gt; Unit) {
            block(content)
        }
        curryingLike(&quot;looks like currying style&quot;) {
            content -&gt;
            println(content)
        }
        // è¿è¡Œç»“æœ
        looks like currying style
        //ä¹Ÿå¯ä»¥ç­‰å€¼ä¸º
        curryingLike(&quot;looks like currying style&quot;,{
            content -&gt;
            println(content)
        }) 

</code></pre><ul>
<li>å†…è”å‡½æ•°(æ¶ˆé™¤lambdaè¿è¡Œæ—¶å¼€é”€)</li>
</ul>
<p>å¼€é”€ï¼šæ¯è°ƒç”¨ ä¸€æ¬¡ lambda è¡¨è¾¾å¼ï¼Œä¸€ä¸ªé¢å¤–çš„ç±»å°±ä¼šè¢«åˆ›å»ºã€‚å¹¶ä¸”å¦‚æœ lambda æ•æ‰äº†æŸä¸ªå˜é‡ï¼Œé‚£ä¹ˆæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ ã€‚ è¿™ä¼šå¸¦æ¥è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€ï¼Œå¯¼è‡´ä½¿ç”¨ lambda æ¯”ä½¿ç”¨ ä¸€ä¸ªç›´æ¥æ‰§è¡Œç›¸åŒä»£ç çš„å‡½æ•°æ•ˆç‡æ›´ä½ ã€‚</p>
<p><strong>inline</strong></p>
<p>ä½¿ç”¨ inline ä¿®é¥°ç¬¦æ ‡è®°ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°è¢«ä½¿ç”¨çš„æ—¶å€™ç¼–è¯‘å™¨å¹¶ä¸ä¼šç”Ÿæˆå‡½æ•°è°ƒç”¨çš„ä»£ç ï¼Œè€Œæ˜¯ä½¿ç”¨å‡½æ•°å®ç°çš„çœŸå®ä»£ç æ›¿æ¢æ¯ä¸€æ¬¡çš„å‡½æ•°è°ƒç”¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">@kotlin.<span style="color:#66d9ef">internal</span>.InlineOnly
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">fun</span> &lt;T&gt; <span style="color:#a6e22e">Lock</span>.withLock(action: () -&gt; T): T {
    lock()
    <span style="color:#66d9ef">try</span> {
        <span style="color:#66d9ef">return</span> action()
    } <span style="color:#66d9ef">finally</span> {
        unlock()
    }
}
</code></pre></div><p><strong>å†…è”å‡½æ•°çš„é™åˆ¶</strong>ï¼š</p>
<p>ä½œä¸ºå‚æ•°çš„ lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä½“ä¼šè¢«ç›´æ¥æ›¿æ¢åˆ°æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¸­ã€‚å¦‚æœï¼ˆlambdaï¼‰å‚æ•°åœ¨æŸä¸ªåœ°æ–¹è¢«ä¿å­˜èµ·æ¥ï¼Œlambda è¡¨è¾¾å¼çš„ä»£ç å°†ä¸èƒ½è¢«å†…è”ã€‚å¦‚æœï¼ˆlambdaï¼‰å‚æ•°è¢«è°ƒç”¨ï¼Œè¿™
æ ·çš„ä»£ç èƒ½è¢«å®¹æ˜“åœ°å†…è”ã€‚</p>
<p><strong>JVMä¼˜åŒ–</strong>
å¯¹äºæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼ŒJVMå·±ç»æä¾›äº†å¼ºå¤§çš„å†…è”æ”¯æŒã€‚åœ¨å°†å®‡èŠ‚ç è½¬æ¢æˆæœºå™¨ä»£ç æ—¶è‡ªåŠ¨å®Œæˆå†…è”ã€‚ä½¿ç”¨inline å…³é”®å­—åªèƒ½æé«˜å¸¦æœ‰ lambda å‚æ•°çš„å‡½æ•°çš„æ€§èƒ½ã€‚å°†å¸¦æœ‰ lambda å‚æ•°çš„å‡½æ•°å†…è”ï¼ŒèŠ‚çº¦äº†ä¸º lambda åˆ›å»ºåŒ¿åç±»ï¼Œä»¥åŠåˆ›å»º lambda å®ä¾‹å¯¹è±¡çš„å¼€é”€ã€‚</p>
<ul>
<li>å‡½æ•°ä¸­çš„æ§åˆ¶æµ</li>
</ul>
<p>lambda ä¸­ä½¿ç”¨ return å…³é”®å­—ï¼Œæ˜¯éå±€éƒ¨è¿”å›(ä»è°ƒç”¨ lambda çš„å‡½æ•°ä¸­è¿”å›ï¼Œå¹¶ä¸åªæ˜¯ä» lambda ä¸­è¿”å› )ã€‚åªæœ‰åœ¨ä»¥ lambda ä½œä¸º å‚æ•°çš„å‡½æ•°æ˜¯å†…è”å‡½æ•°çš„æ—¶å€™æ‰èƒ½ä»æ›´å¤–å±‚çš„å‡½æ•°è¿”å›ã€‚</p>
<p><strong>æ ‡ç­¾è¿”å›</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e">* tag@æ ‡ç­¾ï¼šreturn ä¼šè·³è½¬åˆ°å¼•ç”¨çš„æ ‡ç­¾lamdba è€Œä¸ä¼šè·³å‡ºæ•´ä¸ªå‡½æ•°
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">lookForAlice</span>(s:List&lt;String&gt;){
   s.forEach tag<span style="color:#960050;background-color:#1e0010">@</span>{
       <span style="color:#66d9ef">if</span> (it == <span style="color:#e6db74">&#34;Alice&#34;</span>) <span style="color:#66d9ef">return</span>@tag
   }
   println(<span style="color:#e6db74">&#34;I find Alice&#34;</span>)
}
</code></pre></div><p><strong>åŒ¿åå‡½æ•°ï¼šé»˜è®¤ä½¿ç”¨å±€éƒ¨è¿”å›</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * ä½¿ç”¨åŒ¿åå‡½æ•°lambda
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">lookForAlice2</span>(s:List&lt;String&gt;){
    s.forEach(<span style="color:#66d9ef">fun</span> <span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">s</span>){
        <span style="color:#75715e">//returnæŒ‡å‘æœ€è¿‘çš„åŒ¿åå‡½æ•°
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (s == <span style="color:#e6db74">&#34;Alice&#34;</span>) <span style="color:#66d9ef">return</span>
    })
    println(<span style="color:#e6db74">&#34;I find Alice&#34;</span>)
}
</code></pre></div><h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h3>
<ul>
<li>åŸç”Ÿå­—ç¬¦ä¸²</li>
</ul>
<p>Kotlinä¸­æ”¯æŒåŸç”Ÿå­—ç¬¦ä¸²çš„è¯­æ³•ï¼Œç”¨è¿™ç§3ä¸ªå¼•å·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆçš„æ‰“å°æ ¼å¼ä¸åœ¨ä»£ç ä¸­æ‰€å‘ˆç°çš„æ ¼å¼ä¸€è‡´ï¼Œè€Œä¸ä¼šè§£é‡Šè½¬åŒ–è½¬ä¹‰å­—ç¬¦</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">        <span style="color:#66d9ef">val</span> html = <span style="color:#e6db74">&#34;&#34;&#34;&lt;html&gt;
</span><span style="color:#e6db74">                        &lt;body&gt;
</span><span style="color:#e6db74">                            &lt;p&gt;Hello World.&lt;/p&gt;
</span><span style="color:#e6db74">                        &lt;/body&gt;
</span><span style="color:#e6db74">                    &lt;/html&gt;
</span><span style="color:#e6db74">                &#34;&#34;&#34;</span>
</code></pre></div><ul>
<li>å­—ç¬¦ä¸²æ¨¡æ¿</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">message</span>(name: String, lang: String) = <span style="color:#e6db74">&#34;Hi ${name}, welcome to ${lang}! &#34;</span>
&gt;&gt;&gt; message(<span style="color:#e6db74">&#34;Shaw&#34;</span>, <span style="color:#e6db74">&#34;Kotlin&#34;</span>)
Hi Shaw, welcome to Kotlin!
</code></pre></div>
        </p>
    </div>
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#kotlinçš„ç”Ÿæ€">Kotlinçš„ç”Ÿæ€</a></li>
            <li><a href="#è®¾è®¡å“²å­¦">è®¾è®¡å“²å­¦</a></li>
            <li><a href="#kotlinä¸java">Kotlinä¸Java</a></li>
            <li><a href="#å‡½æ•°">å‡½æ•°</a></li>
            <li><a href="#ç±»-å¯¹è±¡">ç±»-å¯¹è±¡</a></li>
            <li><a href="#lamdba">Lamdba</a></li>
            <li><a href="#é«˜é˜¶lamdba">é«˜é˜¶Lamdba</a></li>
            <li><a href="#å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    <span>&copy; 2022 hanrong.li</span>
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
