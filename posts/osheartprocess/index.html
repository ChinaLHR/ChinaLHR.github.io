<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title> 操作系统-进程 - Read the fucking source code</title>
  <meta name="description" content="Read the fucking source code" />
  <meta property="og:title" content="操作系统-进程" />
  <meta name="twitter:title" content="操作系统-进程" />
  <meta name="description" content="
读《计算机的心智》,另一个角度看操作系统
">
  <meta property="og:description" content="
读《计算机的心智》,另一个角度看操作系统
">
  <meta name="twitter:description" content="
读《计算机的心智》,另一个角度看操作系统
">
  <meta name="author" content="lihanrong"/>
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://chinalhr.github.io/posts/osheartprocess/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="LHR" />

  <meta name="generator" content="Hugo 0.51" />
  <link rel="canonical" href="https://chinalhr.github.io/posts/osheartprocess/" />
  <link rel="alternate" href="https://chinalhr.github.io/index.xml" type="application/rss+xml" title="LHR">
  <script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/jquery-1.12.4.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="https://chinalhr.github.io/css/main.css" />
  <link rel="stylesheet" href="https://chinalhr.github.io/css/search.css" />
  
  
  
  <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


<script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?1459adbc2a99c593738e5cdc66be7fda";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>

<link rel="stylesheet" href="https://chinalhr.github.io/css/prism.css" />





<script async src="//cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://chinalhr.github.io/">LHR</a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Tags" href="/tags/">Tags</a>
              
              
            </li>
          
        
          
            <li>
              <a title="categories" href="/categories/">categories</a>
              
              
            </li>
          
        
          
            <li>
              <a title="About" href="/posts/about/">About</a>
              
              
            </li>
          
        
          
            <li>
              <a title="Resume" href="/posts/resume/">Resume</a>
              
              
            </li>
          
        

        

        
        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="LHR" href="https://chinalhr.github.io/">
            <img class="avatar-img" src="https://avatars0.githubusercontent.com/u/19829495" alt="LHR" />
          </a>
        
      </div>
    </div>

  </div>
</nav>






    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-md-offset-0">
            <div class="posts-heading">
                <h1 align="center">操作系统-进程</h1>
                
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Thu Nov 15, 2018</h4>
    </section>
    <h5 id="wc">100 Words|Read in about 1 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://chinalhr.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a> &nbsp;
    </h5>
</div>

            
            <article role="main" class="blog-post" itemprop="articleBody" id="content">
                
  


                <blockquote>
<p>读《计算机的心智》,另一个角度看操作系统</p>
</blockquote>

<h3 id="关于进程">关于进程</h3>

<p>进展中的程序，一个程序被加载到内存后就变成进程。对于操作系统，进程是其提供的一种抽象，目的是通过并发提高系统CPU利用率，缩短响应时间。</p>

<ul>
<li>进程的三种典型状态</li>
</ul>

<p align="center">
    <img src="https://user-images.githubusercontent.com/19829495/48848073-0c51a500-edde-11e8-9779-6f82ec240dfd.png" width="60%">
    <br />
</p>

<ul>
<li><p>进程的创建过程</p>

<ol>
<li>分配进程控制块</li>
<li>初始化机器寄存器</li>
<li>初始化页表</li>
<li>将程序代码从磁盘读取到内存</li>
<li>将处理器状态设置为用户态</li>
<li>跳转到程序的起始地址(设置程序计数器)</li>
</ol></li>
</ul>

<p>UNIX 创建进程:1.fork[创建一个与自己完全一样的新进程] 2.exec[新进程的地址空间用另一个程序覆盖，跳转到新进程的起始地址完成启动]</p>

<p>Window CreateProcess函数:CreateProcess[传递进来新的程序名称，创建新的页表]</p>

<hr />

<h3 id="进程调度">进程调度</h3>

<ul>
<li><p>程序使用CPU的三种模式</p>

<ol>
<li>计算密集型(科学计算,矩阵乘法&hellip;)</li>
<li>IO密集型(游戏,人机交互&hellip;)</li>
<li>平衡程序(网页浏览，下载，网络视频&hellip;)</li>
</ol></li>

<li><p>进程调度的目标</p></li>
</ul>

<p>极小化平均响应时间，极大化系统吞吐，保持各个系统功能部件处于繁忙和维持公平机制。</p>

<hr />

<h3 id="进程调度算法">进程调度算法</h3>

<ul>
<li>First Come First Server(先来先服务算法)</li>
</ul>

<p>顾名思义&hellip;</p>

<ul>
<li>时间片轮转算法</li>
</ul>

<p>周期性地进行进程切换&hellip;</p>

<ul>
<li>Shorted Time to Completion First(短任务优先算法)</li>
</ul>

<p>非抢占式:CPU上的程序运行到阻塞或者结束，从候选程序中选择执行时间最短的进行执行。
抢占式：新增一个进程时，就从所有进程中选择执行时间最短的运行。</p>

<ul>
<li>优先级调度算法</li>
</ul>

<p>对每个进行赋予优先级，按照优先级调度</p>

<ul>
<li>保证调度算法</li>
</ul>

<p>众生平等策略，如果系统有n个进程，保证每个进程的CPU占用时间为1/n。</p>

<ul>
<li><p>实时调度算法</p>

<ol>
<li>动态优先调度(EDF)
动态计算每个任务的截止时间进行动态调度优先级。由STCF算法改进而来，EDF就是最早截至的任务先运行，如果新进程比正在运行的进程的截止时间更靠前，就抢占当前任务进行调度。
<br /></li>
</ol>

<p>缺陷：需要动态计算任务截止时间，消耗CPU资源，所以就有了静态调度算法</p>

<ol>
<li>静态优先调度(RMS)
在进行调度之前，先计算出所有任务的优先级，按照计算的优先级进行调度，任务执行过程中不接受新进程也不进行优先级调整与CPU抢占。
<br /></li>
</ol>

<p>缺陷：没有动态优先调度灵活</p></li>
</ul>

<hr />

<h3 id="进程通信-ipc">进程通信(IPC)</h3>

<ul>
<li>管道通信(类UNIX下)
通过Shell的 | :sort &lt; file |grep li [在排序sort与查找grep之间建立管道。数据从sort流向grep，作用是对file进行排序，排序结果作为grep程序的输入，在结果中找出包括li的文本行]</li>
</ul>

<p>通过pipe函数</p>

<p>管道：用于管道的读与写。半双工的，具有固定的读端和写端(他只能用于具有亲缘关系的进程之间的通信)。可以看成是一种特殊的文件，对于它的读写也可以使用普通的read、write 等函数。但是它不是普通的文件，并不属于其他任何文件系统，并且只存在于内存中。</p>

<ul>
<li>FIFO(命名管道，是一种文件类型)
FIFO可以在无关的进程之间交换数据，与无名管道不同。</li>
</ul>

<p>FIFO有路径名与之相关联，它以一种特殊设备文件形式存在于文件系统中。</p>

<ul>
<li><p>Socket套接字
分为本地(UNIX域)套接字，网域套接字</p></li>

<li><p>信号
利用CPU内中断进行通信</p></li>
</ul>

<p>在计算机里，信号就是一个内核对象(数据结构)。发送方将该数据结构的内容填好，并指明该信号的目标进程后，发出特定的软件中断。操作系统接收到特定的中断请求后，知道是有进程要发送信号，于是到特定的内核数据结构里查找信号接收方，并进行通知。接到通知的进程则对信号进行相应处理。</p>

<ul>
<li><p>共享内存
&hellip;</p></li>

<li><p>消息队列
无固定读写进程，支持多进程，多对多而并非管道之类的点对点。<br/>
消息队列是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标识。</p></li>
</ul>

<p><img src="https://user-images.githubusercontent.com/19829495/49161049-0b32f180-f363-11e8-9da0-536211ebae9a.png" alt="image" /></p>

<ul>
<li>参考：</li>
</ul>

<p><a href="https://songlee24.github.io/2015/04/21/linux-IPC/">https://songlee24.github.io/2015/04/21/linux-IPC/</a></p>

<h4 id="权衡">权衡</h4>

<ul>
<li>管道通信,Socket套接字消耗系统资源大</li>
<li>信号:小数据量通信</li>
<li>共享内存，消息队列:大数据量通信</li>
</ul>
            </article>

            <ul class="pager blog-pager">
                
                <li class="previous">
                    <a href="https://chinalhr.github.io/posts/mybatisshardplug/" data-toggle="tooltip" data-placement="top" title="Mybatis自定义分表Plug">&larr; Previous Post</a>
                </li>
                 
                <li class="next">
                    <a href="https://chinalhr.github.io/posts/javacachestrategy/" data-toggle="tooltip" data-placement="top" title="缓存更新策略">Next Post &rarr;</a>
                </li>
                
            </ul>
            
            <div>
                 
            </div>
            
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Thu Nov 15, 2018</h4>
    </section>
    <h5 id="wc">100 Words|Read in about 1 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://chinalhr.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a> &nbsp;
    </h5>
</div>

            
            </div>
            
            
                
                 <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<aside id=comments>
    
    
    
    
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNjI4Ni8xMjgyMQ==">
    	<script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
           if (typeof LivereTower === 'function') { return; }
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    	</script>
    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>
    
</aside>
</div>

                
            
        </div>
    </div>
    </section>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:13435500980@163.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/ChinaLHR" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="https://chinalhr.github.io/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
        &copy;2017-2018
          
            
              <a href="https://chinalhr.github.io/">lihanrong</a>
            
          
          
          
            &nbsp;&bull;&nbsp;
            <a href="https://chinalhr.github.io/">LHR</a>
          
        </p>

        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.51</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/rootsongjc/beautifulhugo">Beautiful Hugo</a>
          
		   <span id="busuanzi_container_site_pv">
            本站访问量：<span id="busuanzi_value_site_pv"></span>次
        </span>
        &nbsp;
        <span id="busuanzi_container_site_uv">
            您是本站第 <span id="busuanzi_value_site_uv"></span> 位访问者
        </span>
        </p>
      </div>
    </div>
  </div>
</footer>


<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/bootstrap.min.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/photoswipe-ui-default.min.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/photoswipe.min.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/auto-render.min.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/main.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/prism.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/katex.min.js"></script>
<script> renderMathInElement(document.body); </script>







  </body>
</html>

