<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.31.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>RedisTemplate问题 &middot; LHR</title>

  
  <link rel="stylesheet" href="https://chinalhr.github.io/css/print.css" media="print">
  <link rel="stylesheet" href="https://chinalhr.github.io/css/poole.css">
  <link rel="stylesheet" href="https://chinalhr.github.io/css/syntax.css">
  <link rel="stylesheet" href="https://chinalhr.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="LHR" />
</head>

  <body class="theme-base-0d ">
  <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <a href="https://chinalhr.github.io/"><h1>LHR</h1></a>
      <p class="lead">
       Read the fucking source code 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="https://chinalhr.github.io/">Home</a> </li>
      <li><a href="/post/about/"> About </a></li><li><a href="/tags/catalogue/"> Catalogue </a></li>
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>RedisTemplate问题</h1>
  <span class="post-date">Fri, Jul 13, 2018</span>
  <p></p>

<h2 id="redistemplate事务问题">RedisTemplate事务问题</h2>

<ul>
<li>RedisTemplate事务使用
采用RedisTemplate的SesionCallback</li>
</ul>

<pre><code>SessionCallback&lt;Object&gt; sessionCallback=new SessionCallback&lt;Object&gt;(){
  @Override
   public Object execute(RedisOperations operations) throws DataAccessException{
		operations.multi();
		//常规操作...
		Object val=operations.exec();
		return val;
	}
}
StringRedisTemplate.execute(sessionCallback);
</code></pre>

<ul>
<li>UnsupportedOperationException
在Pipline和Transaction中不支持多个字段操作
<img src="https://s1.ax1x.com/2018/07/13/PK0ASI.png" alt="" /></li>
</ul>

<h2 id="redistemple序列化问题">RedisTemple序列化问题</h2>

<p>使用redisTemplate 存储时， 如果value是数字类型, 包括Integer,Long,Double. 序列化时不会根据泛型进行类型转换，而是根据数字长度进行转换为Integer，Long&hellip;,会有导致序列化失败，类型转换异常风险。</p>

<p>解决：使用Number存储</p>

<h2 id="优秀博文链接">优秀博文链接</h2>

<p><a href="https://www.jianshu.com/p/7bf5dc61ca06">https://www.jianshu.com/p/7bf5dc61ca06</a></p>
</div>


    </div>

    
  </body>
</html>